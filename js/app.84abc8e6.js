(function(e){function t(t){for(var n,o,l=t[0],s=t[1],c=t[2],d=0,m=[];d<l.length;d++)o=l[d],r[o]&&m.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,l=1;l<a.length;l++){var s=a[l];0!==r[s]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},i=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("64a9"),r=a.n(n);r.a},"13b9":function(e,t,a){"use strict";var n=a("e64d"),r=a.n(n);r.a},"1dc1":function(e,t,a){},"21a7":function(e,t,a){},"231c":function(e,t,a){"use strict";var n=a("cd04"),r=a.n(n);r.a},"26b1":function(e,t,a){},"36f0":function(e,t,a){},"3c9c":function(e,t,a){},"3f94":function(e,t,a){"use strict";var n=a("d89c"),r=a.n(n);r.a},"424e":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n,r=a("2b0e"),i=a("5c96"),o=a.n(i),l=(a("0fae"),a("8c4f")),s=a("2f62"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"},on:{click:e.handleNavmenu}},[a("div",{staticStyle:{width:"100%",height:"50px","background-color":"#545c64",display:"flex","align-items":"center",color:"white"}},[a("i",{staticClass:"el-icon-menu",staticStyle:{padding:"0px 20px","font-size":"24px"},on:{click:e.handleSwitch}}),a("div",{staticStyle:{"flex-grow":"1","text-align":"center"}},[e._v(e._s(e.pagetitle))])]),a("transition",{attrs:{name:"el-zoom-in-top"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isCollapse,expression:"isCollapse"}],staticStyle:{width:"200px",position:"absolute",left:"0",top:"50px","z-index":"10"},on:{click:e.stopbubble}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",router:!0,width:"200px"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"/add"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("数据中心")])]),a("el-menu-item",{attrs:{index:"/hi"}},[a("i",{staticClass:"el-icon-setting"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("租盘管理")])]),a("el-menu-item",{attrs:{index:"/chargeitems"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("收费管理")])]),a("el-menu-item",{attrs:{index:"/checkout"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("抄表及打印")])])],1)],1)]),a("router-view")],1)},u=[],d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("div",{staticClass:"houses-head-wrap"},[a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.handleToAdd}},[e._v("添加")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{fixed:"",prop:"number",label:"房号",width:"80px"}}),a("el-table-column",{attrs:{prop:"type",label:"户型",width:"min-width"}}),a("el-table-column",{attrs:{prop:"address",label:"地址",width:"min-width"}}),a("el-table-column",{attrs:{fixed:"right",width:"50px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleNmenuClick}},[a("i",{staticClass:"el-icon-more"}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{house:t.row,action:"records"}}},[e._v("水电表记录")]),a("el-dropdown-item",{attrs:{command:{house:t.row,action:"edit"}}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:{house:t.row,action:"delete"}}},[e._v("删除")])],1)],1)]}}])})],1)],1)},m=[],f=a("0a0d"),p=a.n(f),h=a("a4bb"),b=a.n(h),v=(a("4917"),a("a481"),{formatPrice:function(e){return e.replace(/^(\d+)($|\.\d+)/,function(e,t,a){return""===a?e+".00":t+(a+="00").match(/^\.\d{2}/)[0]})},Object2Array:function(e,t){var a=this;return b()(e).map(function(n){return e[n].id=n,e[n].date&&(e[n].dateformate=a.getDate(e[n].date)),t&&(e[n].parentid=t),e[n]})},getDate:function(e){var t=new Date(e),a=("0"+(t.getMonth()+1)).match(/.*(\d{2})$/)[1],n=("0"+t.getDate()).match(/.*(\d{2})$/)[1];return t.getFullYear()+"-"+a+"-"+n}}),w=v,g={name:"HelloWorld",data:function(){return{inputdata:"",tableData:[],pagetitle:"租盘管理"}},props:{msg:String},beforeRouteEnter:function(e,t,a){a(function(e){e.$store.commit("settitle",e.pagetitle)})},created:function(){var e=p()(),t=this;window.firebase.database().ref("houses").on("value",function(a){t.tableData=w.Object2Array(a.val()),console.log(p()()-e)})},methods:{handleClick:function(){var e=this.tableData?this.tableData.map(function(e){return e}):[];e.push({number:this.inputdata,type:"一房一厅",address:"横潭大街32-1号"}),window.firebase.database().ref("test").set(e)},handleDelect:function(e){var t=this;this.$confirm("删除 ".concat(e.number,"-").concat(e.type,"-").concat(e.address," 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){window.firebase.database().ref("houses/"+e.id).remove(),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleEdit:function(e){this.$router.push({path:"/edithouse/"+e.id})},handleToAdd:function(){this.$router.push({path:"/add"})},handleNmenuClick:function(e){switch(e.action){case"records":this.$store.commit("setwatermonitors",e.house.watermonitors),this.$store.commit("seteletricmonitors",e.house.eletricmonitors),this.$router.push({path:"/managerecord"});break;case"edit":this.handleEdit(e.house);break;case"delete":this.handleDelect(e.house);break}}}},y=g,x=(a("b4a2"),a("2877")),$=Object(x["a"])(y,d,m,!1,null,"e0ece5be",null),k=$.exports,_={name:"app",components:{HelloWorld:k},data:function(){return{isCollapse:!0}},computed:{pagetitle:function(){return this.$store.state.title}},methods:{handleSelect:function(){},handleNavmenu:function(e){this.isCollapse=!1},stopbubble:function(e){e.stopPropagation()},handleSwitch:function(e){e.stopPropagation(),this.isCollapse=!this.isCollapse}}},C=_,E=(a("034f"),Object(x["a"])(C,c,u,!1,null,null,null)),S=E.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-from-wrap"},[a("el-form",{attrs:{"label-width":"70px",model:e.house,"label-position":"top"}},[a("el-form-item",{attrs:{label:"房号"}},[a("el-input",{model:{value:e.house.number,callback:function(t){e.$set(e.house,"number",t)},expression:"house.number"}})],1),a("el-form-item",{attrs:{label:"户型"}},[a("el-input",{model:{value:e.house.type,callback:function(t){e.$set(e.house,"type",t)},expression:"house.type"}})],1),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{model:{value:e.house.address,callback:function(t){e.$set(e.house,"address",t)},expression:"house.address"}})],1),a("el-form-item",{attrs:{label:"租金"}},[a("el-input",{model:{value:e.house.price,callback:function(t){e.$set(e.house,"price",t)},expression:"house.price"}})],1),a("el-form-item",{attrs:{label:"押金"}},[a("el-input",{model:{value:e.house.subprice,callback:function(t){e.$set(e.house,"subprice",t)},expression:"house.subprice"}})],1),a("el-form-item",{attrs:{label:"是否收取电费"}},[a("el-switch",{attrs:{"active-text":"收取","inactive-text":"不收取"},model:{value:e.house.eletric,callback:function(t){e.$set(e.house,"eletric",t)},expression:"house.eletric"}})],1),a("el-form-item",{attrs:{label:"是否收取水费"}},[a("el-switch",{attrs:{"active-text":"收取","inactive-text":"不收取"},model:{value:e.house.water,callback:function(t){e.$set(e.house,"water",t)},expression:"house.water"}})],1),a("el-form-item",{attrs:{label:"收费项目"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.house.chargeitems,callback:function(t){e.$set(e.house,"chargeitems",t)},expression:"house.chargeitems"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",round:""},on:{click:e.handleAdd}},[e._v("保存")])],1)],1)},A=[],D=(a("7f7f"),{name:"Addform",data:function(){return{inputdata:"addpage",options:[],house:{number:"",type:"",address:"",price:"",subprice:"",chargeitems:[],eletric:!1,water:!1},pagetitle:"新增租盘"}},beforeRouteEnter:function(e,t,a){a(function(e){e.$store.commit("settitle",e.pagetitle)})},props:{msg:String},created:function(){var e=this;window.firebase.database().ref("chargeitems").once("value",function(t){var a=[];for(var n in t.val())"universal"==t.val()[n]["type"]&&a.push({label:t.val()[n]["name"],value:n});e.options=a,console.log(a)})},methods:{handleAdd:function(){var e=this,t=window.firebase.database().ref("houses").push();t.set(this.house).then(function(){e.$confirm("是否立即为该房源初始化水电表数值?","提示",{confirmButtonText:"立即初始化",cancelButtonText:"稍后再初始化",type:"warning"}).then(function(){e.$router.push({path:"/initrecord/"+t.key})}).catch(function(){e.$router.push({path:"/hi"})})}).catch(function(){console.log("write failed")})}}}),j=D,R=(a("b31d"),Object(x["a"])(j,O,A,!1,null,"5a56a408",null)),T=R.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"houses-head-wrap"},[a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.handleToAdd}},[e._v("添加")])],1),a("div",{staticClass:"title-wrap"},[e._v("其他费用")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.universal,stripe:""}},[a("el-table-column",{attrs:{fixed:"",prop:"name",label:"项目",width:"80px"}}),a("el-table-column",{attrs:{prop:"price",label:"价格(单位:元)",width:"min-width"}}),a("el-table-column",{attrs:{fixed:"right",width:"150px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelect(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"title-wrap"},[e._v("水电费")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.usage,stripe:""}},[a("el-table-column",{attrs:{fixed:"",prop:"name",label:"项目",width:"80px"}}),a("el-table-column",{attrs:{prop:"price",label:"价格(单位:元)",width:"min-width"}}),a("el-table-column",{attrs:{fixed:"right",width:"150px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelect(t.row)}}},[e._v("删除")])]}}])})],1)],1)},N=[],P={name:"chargeitems",data:function(){return{universal:[],usage:[],pagetitle:"收费管理"}},beforeRouteEnter:function(e,t,a){a(function(e){e.$store.commit("settitle",e.pagetitle)})},created:function(){var e=this,t={universal:"",water:"",eletric:""};window.firebase.database().ref("chargeitems").on("value",function(a){for(var n in t.universal=e.universal=[],t.eletric=t.water=e.usage=[],a.val())t[a.val()[n]["type"]].push({id:n,name:a.val()[n]["name"],price:"".concat(w.formatPrice(a.val()[n]["price"]),"/").concat(a.val()[n]["unit"])})})},methods:{handleEdit:function(e){this.$router.push({path:"/editchargeitem/"+e.id})},handleDelect:function(e){var t=this;this.$confirm("删除"+e.name+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){window.firebase.database().ref("chargeitems/"+e.id).remove(),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleToAdd:function(){this.$router.push({path:"/addchargeitem"})}}},B=P,W=(a("873d"),Object(x["a"])(B,z,N,!1,null,"cb566b42",null)),H=W.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-from-wrap"},[a("el-form",{attrs:{"label-width":"70px",model:e.formdata,"label-position":"left"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.formdata.name,callback:function(t){e.$set(e.formdata,"name",t)},expression:"formdata.name"}})],1),a("el-form-item",{attrs:{label:"价格"}},[a("el-input",{model:{value:e.formdata.price,callback:function(t){e.$set(e.formdata,"price",t)},expression:"formdata.price"}})],1),a("el-form-item",{attrs:{label:"收费类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formdata.type,callback:function(t){e.$set(e.formdata,"type",t)},expression:"formdata.type"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1)],1),a("el-button",{attrs:{type:"primary",round:"",disabled:e.saveavaliable},on:{click:e.handleAdd}},[e._v("保存")])],1)},I=[],K={name:"Addchargeitem",data:function(){return{options:[{label:"其他费用",value:"universal"},{label:"水费",value:"water"},{label:"电费",value:"eletric"}],units:[{label:"KWH",vaule:"KWH"},{label:"m³",value:"m³"}],formdata:{name:"",price:"",type:"",unit:""},pagetitle:"新增收费项目"}},beforeRouteEnter:function(e,t,a){a(function(e){e.$store.commit("settitle",e.pagetitle)})},computed:{saveavaliable:function(){return""===this.formdata.name||""===this.formdata.price},unit:function(){var e={universal:"月",water:"m³",eletric:"KWH"};return e[this.formdata.type]}},methods:{handleAdd:function(){var e=this,t=window.firebase.database().ref("chargeitems").push();this.formdata.unit=this.unit,t.set(this.formdata).then(function(){e.$router.push({path:"/chargeitems"})}).catch(function(){console.log("write failed")})},handleChange:function(e){this.formdata.unit=e?"月":""}}},F=K,J=(a("231c"),Object(x["a"])(F,M,I,!1,null,"231770f6",null)),q=J.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-from-wrap"},[a("el-form",{attrs:{"label-width":"70px",model:e.formdata,"label-position":"left"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.formdata.name,callback:function(t){e.$set(e.formdata,"name",t)},expression:"formdata.name"}})],1),a("el-form-item",{attrs:{label:"价格"}},[a("el-input",{model:{value:e.formdata.price,callback:function(t){e.$set(e.formdata,"price",t)},expression:"formdata.price"}})],1),a("el-form-item",{attrs:{label:"收费类型"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleChange},model:{value:e.formdata.type,callback:function(t){e.$set(e.formdata,"type",t)},expression:"formdata.type"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),a("el-button",{attrs:{type:"primary",round:"",disabled:e.saveavaliable},on:{click:e.handleSave}},[e._v("保存")])],1)},Q=[],Y={name:"Editchargeitem",data:function(){return{options:[{label:"其他费用",value:"universal"},{label:"水费",value:"water"},{label:"电费",value:"eletric"}],units:[{label:"KWH",value:"KWH"},{label:"m³",value:"m³"}],formdata:{name:"",price:"",type:"",unit:""},pagetitle:"修改收费项目"}},beforeRouteEnter:function(e,t,a){a(function(e){e.$store.commit("settitle",e.pagetitle)})},computed:{saveavaliable:function(){return""===this.formdata.name||""===this.formdata.price},unit:function(){var e={universal:"月",water:"m³",eletric:"KWH"};return e[this.formdata.type]}},created:function(){var e=this;window.firebase.database().ref("chargeitems/"+this.$route.params.id).once("value",function(t){e.formdata=t.val()})},methods:{handleSave:function(){var e=this,t=this;this.formdata.unit=this.unit,window.firebase.database().ref("chargeitems/"+this.$route.params.id).set(t.formdata).then(function(){e.$router.push("/chargeitems")}).catch(function(){console.log("write failed")})},handleChange:function(e){this.formdata.unit=e?"月":""}}},G=Y,U=(a("3f94"),Object(x["a"])(G,L,Q,!1,null,"0d685545",null)),V=U.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-from-wrap"},[a("el-form",{attrs:{"label-width":"70px",model:e.house,"label-position":"top"}},[a("el-form-item",{attrs:{label:"房号"}},[a("el-input",{model:{value:e.house.number,callback:function(t){e.$set(e.house,"number",t)},expression:"house.number"}})],1),a("el-form-item",{attrs:{label:"户型"}},[a("el-input",{model:{value:e.house.type,callback:function(t){e.$set(e.house,"type",t)},expression:"house.type"}})],1),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{model:{value:e.house.address,callback:function(t){e.$set(e.house,"address",t)},expression:"house.address"}})],1),a("el-form-item",{attrs:{label:"租金"}},[a("el-input",{model:{value:e.house.price,callback:function(t){e.$set(e.house,"price",t)},expression:"house.price"}})],1),a("el-form-item",{attrs:{label:"押金"}},[a("el-input",{model:{value:e.house.subprice,callback:function(t){e.$set(e.house,"subprice",t)},expression:"house.subprice"}})],1),a("el-form-item",{attrs:{label:"是否收取电费"}},[a("el-switch",{attrs:{"active-text":"收取","inactive-text":"不收取"},model:{value:e.house.eletric,callback:function(t){e.$set(e.house,"eletric",t)},expression:"house.eletric"}})],1),a("el-form-item",{attrs:{label:"是否收取水费"}},[a("el-switch",{attrs:{"active-text":"收取","inactive-text":"不收取"},model:{value:e.house.water,callback:function(t){e.$set(e.house,"water",t)},expression:"house.water"}})],1),a("el-form-item",{attrs:{label:"收费项目"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.house.chargeitems,callback:function(t){e.$set(e.house,"chargeitems",t)},expression:"house.chargeitems"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",round:""},on:{click:e.handleSave}},[e._v("保存")])],1)],1)},Z=[],ee={name:"edithouse",data:function(){return{pagetitle:"修改租盘",inputdata:"addpage",options:[],house:{number:"",type:"",address:"",price:"",subprice:"",chargeitems:[],eletric:!1,water:!1}}},props:{msg:String},beforeRouteEnter:function(e,t,a){a(function(e){e.$store.commit("settitle",e.pagetitle)})},created:function(){var e=this;window.firebase.database().ref("houses/"+this.$route.params.id).once("value",function(t){e.house=t.val()}),window.firebase.database().ref("chargeitems").once("value",function(t){var a=[];for(var n in t.val())"universal"==t.val()[n].type&&a.push({label:t.val()[n]["name"],value:n});e.options=a})},methods:{handleSave:function(){window.firebase.database().ref("houses/"+this.$route.params.id).set(this.house),this.$router.push({path:"/hi"})}}},te=ee,ae=(a("6829"),Object(x["a"])(te,X,Z,!1,null,"40fbec5d",null)),ne=ae.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap"},[a("el-form",{attrs:{model:e.formdata,"label-width":"80px"}},[e.house.eletric?a("div",[a("div",{staticClass:"button-wrap"},[a("el-button",{attrs:{type:"primary",round:""},on:{click:e.handleAdde}},[e._v("增加电表")])],1),a("div",e._l(e.formdata.eletrics,function(t,n){return a("div",{staticClass:"row-wrap"},[a("el-form-item",{attrs:{label:"电表"+n+"数值"}},[a("el-input",{model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})],1),a("el-form-item",{attrs:{label:"计量单价"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.unitprice,callback:function(a){e.$set(t,"unitprice",a)},expression:"item.unitprice"}},e._l(e.eletricoptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-button",{staticClass:"minus-button",staticStyle:{"margin-left":"15px"},attrs:{type:"primary",icon:"el-icon-minus",circle:""},on:{click:e.delete1eletric}})],1)],1)}),0)]):e._e(),e.house.water?a("div",[a("div",{staticClass:"button-wrap"},[a("el-button",{attrs:{type:"primary",round:""},on:{click:e.handleAddw}},[e._v("增加水表")])],1),a("div",e._l(e.formdata.waters,function(t,n){return a("div",{staticClass:"subrow-wrap"},[a("el-form-item",{attrs:{label:"水表"+n+"数值"}},[a("el-input",{model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})],1),a("el-form-item",{attrs:{label:"计量单价"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.unitprice,callback:function(a){e.$set(t,"unitprice",a)},expression:"item.unitprice"}},e._l(e.wateroptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-button",{staticClass:"minus-button",staticStyle:{"margin-left":"15px"},attrs:{type:"primary",icon:"el-icon-minus",circle:""},on:{click:e.delete1water}})],1)],1)}),0)]):e._e(),a("div",{staticClass:"button-wrap"},[a("el-button",{attrs:{round:""},on:{click:e.handleAddw}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",round:""},on:{click:e.handleInit}},[e._v("立即初始化")])],1)])],1)},ie=[],oe={name:"Initrecord",data:function(){return{formdata:{eletrics:[{value:"0",unitprice:""}],waters:[{value:"0",unitprice:""}]},wateroptions:[],eletricoptions:[],tables:{water:"waterfees",eletric:"eletricfees"},house:{}}},beforeRouteEnter:function(e,t,a){a()},created:function(){var e=this;window.firebase.database().ref("chargeitems").once("value").then(function(t){for(var a in t.val())"water"==t.val()[a].type&&e.wateroptions.push({id:a,name:t.val()[a].name}),"eletric"==t.val()[a].type&&e.eletricoptions.push({id:a,name:t.val()[a].name})}).then(function(){window.firebase.database().ref("houses/"+e.$route.params.id).once("value",function(t){e.house=t.val()})})},methods:{handleAdde:function(){this.formdata.eletrics.push({value:"0"})},handleAddw:function(){this.formdata.waters.push({value:"0"})},delete1eletric:function(e){this.formdata.eletrics.pop()},delete1water:function(e){this.formdata.waters.pop()},handleInit:function(){this.house.eletric&&this.processRecord("eletric"),this.house.water&&this.processRecord("water")},processRecord:function(e){var t={water:{monitors:this.formdata.waters,tablename:"watermonitors"},eletric:{monitors:this.formdata.eletrics,tablename:"eletricmonitors"}},a=t[e].monitors.map(function(a,n){var r=window.firebase.database().ref(t[e].tablename).push();return r.set({name:n,priceid:a.unitprice}).then(function(){var n=window.firebase.database().ref(t[e].tablename+"/"+r.key+"/records").push();n.set({value:a.value,date:p()()})}),r.key});window.firebase.database().ref("houses/"+this.$route.params.id+"/"+t[e].tablename).set(a)}}},le=oe,se=(a("664a"),Object(x["a"])(le,re,ie,!1,null,"66c279b6",null)),ce=se.exports,ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"houses-head-wrap"},[a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.handleToAdd}},[e._v("添加")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{fixed:"",prop:"name",label:"名称",width:"80px"}}),a("el-table-column",{attrs:{prop:"price",label:"单价",width:"min-width"}}),a("el-table-column",{attrs:{fixed:"right",width:"150px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelect(t.row)}}},[e._v("删除")])]}}])})],1)],1)},de=[],me={name:"",data:function(){return{tableData:[],tables:{water:"waterfees",eletric:"eletricfees"},table:""}},beforeRouteEnter:function(e,t,a){a(function(t){t.table=t.tables[e.path.match(/\/(.+)/)[1]],window.firebase.database().ref(t.table).on("value",function(e){t.tableData=w.Object2Array(e.val())})})},methods:{handleEdit:function(e){this.$router.push({path:"/editfee/"+e.id})},handleDelect:function(e){var t=this;this.$confirm("删除 ".concat(e.name," 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){window.firebase.database().ref(t.table+"/"+e.id).remove(),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleToAdd:function(){this.$router.push({path:"/addfee"})}}},fe=me,pe=(a("8ee3"),Object(x["a"])(fe,ue,de,!1,null,"a2494708",null)),he=pe.exports,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-from-wrap"},[a("el-form",{attrs:{"label-width":"70px",model:e.formdata,"label-position":"left"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.formdata.name,callback:function(t){e.$set(e.formdata,"name",t)},expression:"formdata.name"}})],1),a("el-form-item",{attrs:{label:"单价"}},[a("el-input",{model:{value:e.formdata.price,callback:function(t){e.$set(e.formdata,"price",t)},expression:"formdata.price"}})],1)],1),a("el-button",{attrs:{type:"primary",round:""},on:{click:e.handleAdd}},[e._v("保存")])],1)},ve=[],we=a("bd86"),ge=(n={name:"Addfee",data:function(){return{formdata:{name:"",price:""},table:{water:"waterfees",eletric:"eletricfees"},path:"",pagetitle:"新增收费项目"}},beforeRouteEnter:function(e,t,a){a(function(e){e.$store.commit("settitle",e.pagetitle)})}},Object(we["a"])(n,"beforeRouteEnter",function(e,t,a){a(function(e){e.path=t.path,e.table=e.table[e.path.match(/\/(.+)/)[1]],console.log(e.table)})}),Object(we["a"])(n,"methods",{handleAdd:function(){var e=this,t=window.firebase.database().ref(this.table).push();t.set(this.formdata).then(function(){e.$router.push({path:e.path})}).catch(function(){console.log("write failed")})}}),n),ye=ge,xe=(a("b3bd"),Object(x["a"])(ye,be,ve,!1,null,"2e946ab7",null)),$e=xe.exports,ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-from-wrap"},[a("el-form",{attrs:{"label-width":"70px",model:e.formdata,"label-position":"left"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.formdata.name,callback:function(t){e.$set(e.formdata,"name",t)},expression:"formdata.name"}})],1),a("el-form-item",{attrs:{label:"单价"}},[a("el-input",{model:{value:e.formdata.price,callback:function(t){e.$set(e.formdata,"price",t)},expression:"formdata.price"}})],1)],1),a("el-button",{attrs:{type:"primary",round:""},on:{click:e.handleSave}},[e._v("保存")])],1)},_e=[],Ce={name:"Editfee",data:function(){return{formdata:{name:"",price:""},tables:{water:"waterfees",eletric:"eletricfees"},table:"",path:""}},beforeRouteEnter:function(e,t,a){a(function(a){a.path=t.path,a.table=a.tables[t.path.match(/\/(.+)/)[1]],window.firebase.database().ref(a.table+"/"+e.params.id).once("value",function(e){a.formdata=e.val()})})},created:function(){},methods:{handleSave:function(){var e=this;window.firebase.database().ref(this.table+"/"+this.$route.params.id).set(this.formdata).then(function(){e.$router.push(e.path)}).catch(function(){console.log("write failed")})}}},Ee=Ce,Se=(a("d752"),Object(x["a"])(Ee,ke,_e,!1,null,"2b04b972",null)),Oe=Se.exports,Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"row-click":e.handleRowclick}},[a("el-table-column",{attrs:{prop:"number",label:"房号",width:"80"}}),a("el-table-column",{attrs:{prop:"address",label:"地址",filters:[{text:"横潭大街32号",value:"横潭大街32号"},{text:"朝阳巷5号",value:"朝阳巷5号"}],"filter-method":e.filterAddress,width:"min-width"}}),a("el-table-column",{attrs:{prop:"date",label:"起租日",width:"100"}})],1)],1)},De=[],je={name:"Checkout",data:function(){return{tableData:[],pagetitle:"抄表及打印"}},beforeRouteEnter:function(e,t,a){a(function(e){e.$store.commit("settitle",e.pagetitle)})},created:function(){var e=this;window.firebase.database().ref("houses").once("value",function(t){e.tableData=w.Object2Array(t.val())})},methods:{handleRowclick:function(e){this.$router.push({path:"/generatebill/"+e.id})},filterAddress:function(e,t,a){return t.address===e}}},Re=je,Te=Object(x["a"])(Re,Ae,De,!1,null,"4e4f2b70",null),ze=Te.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{"label-width":"70px",model:e.house,"label-position":"left"}},[e._l(e.eletricmonitors,function(t,n){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.house.eletric,expression:"house.eletric"}]},[a("h4",{staticClass:"info-title"},[e._v(e._s("电表"+n))]),a("div",{staticClass:"info-wrap"},[a("div",{staticClass:"last-record-row"},[e._v(e._s("末次记录 "+t.lastrecord+"   "+t.lastdate))]),a("el-form-item",{attrs:{label:"本次记录"}},[a("el-input",{model:{value:t.current,callback:function(a){e.$set(t,"current",a)},expression:"item.current"}})],1)],1)])}),e._l(e.watermonitors,function(t,n){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.house.water,expression:"house.water"}]},[a("h4",{staticClass:"info-title"},[e._v(e._s("水表"+n))]),a("div",{staticClass:"info-wrap"},[a("div",{staticClass:"last-record-row"},[e._v(e._s("末次记录 "+t.lastrecord+"   "+t.lastdate))]),a("el-form-item",{attrs:{label:"本次记录"}},[a("el-input",{model:{value:t.current,callback:function(a){e.$set(t,"current",a)},expression:"item.current"}})],1)],1)])})],2),a("el-button",{attrs:{type:"primary",round:""},on:{click:e.generate}},[e._v("生成账单")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.billon,expression:"billon"}]},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.house.eletric,expression:"house.eletric"}]},[a("h5",{staticClass:"bill-title"},[e._v("电费")]),e._l(e.bill.eletric,function(e,t){return a("el-table",{attrs:{data:e}},[a("el-table-column",{attrs:{prop:"current",label:"本次记录"}}),a("el-table-column",{attrs:{prop:"lastrecord",label:"末次记录"}}),a("el-table-column",{attrs:{prop:"usage",label:"度差"}}),a("el-table-column",{attrs:{prop:"price",label:"单价"}}),a("el-table-column",{attrs:{prop:"total",label:"价格"}})],1)})],2),a("div",{directives:[{name:"show",rawName:"v-show",value:e.house.water,expression:"house.water"}]},[a("h5",{staticClass:"bill-title"},[e._v("水费")]),e._l(e.bill.water,function(e,t){return a("el-table",{attrs:{data:e}},[a("el-table-column",{attrs:{prop:"current",label:"本次记录"}}),a("el-table-column",{attrs:{prop:"lastrecord",label:"末次记录"}}),a("el-table-column",{attrs:{prop:"usage",label:"度差"}}),a("el-table-column",{attrs:{prop:"price",label:"单价"}}),a("el-table-column",{attrs:{prop:"total",label:"价格"}})],1)})],2),a("el-table",{attrs:{"show-summary":"",data:e.bill.chargeitems}},[a("el-table-column",{attrs:{prop:"name",label:"款项"}}),a("el-table-column",{attrs:{prop:"price",label:"价格"}})],1),a("div",{staticClass:"link-btn-wrap"},[a("a",{staticClass:"link-button",attrs:{href:"mprint://myprint.ciwi/easyhome?"+e.print.substring(1)}},[e._v("打印")])])],1)],1)},Pe=[],Be=(a("c5f6"),a("5df3"),a("795b")),We=a.n(Be),He=a("59ad"),Me=a.n(He),Ie=(a("ac6a"),{name:"generatebill",data:function(){return{house:{},eletricmonitors:[],watermonitors:[],chargeitems:{},print:"",billon:!1}},beforeRouteEnter:function(e,t,a){a(function(e){})},computed:{bill:function(){var e=this,t={eletric:[],water:[],chargeitems:[{name:"租金",price:this.house.price?this.house.price:0},{name:"电费",price:0},{name:"水费",price:0}]};return this.eletricmonitors.length>0&&(this.eletricmonitors.forEach(function(e){e.usage=e.current-e.lastrecord,e.total=(e.usage*e.price).toFixed(2),t.chargeitems[1].price+=Me()(e.total)}),t.eletric=this.eletricmonitors.map(function(e){var t=[e];return t})),this.watermonitors.length>0&&(this.watermonitors.forEach(function(e){e.usage=e.current-e.lastrecord,e.total=(e.usage*e.price).toFixed(2),t.chargeitems[2].price+=Me()(e.total)}),t.water=this.watermonitors.map(function(e){var t=[e];return t})),this.house.chargeitems&&this.house.chargeitems.forEach(function(a){t.chargeitems.push(e.chargeitems[a])}),t}},created:function(){var e=this,t=this.getChargeitems(),a=new We.a(function(t,a){window.firebase.database().ref("houses/"+e.$route.params.id).once("value").then(function(a){e.house=a.val(),console.log(e.house),t()})});We.a.all([a,t]).then(function(){e.getMonitors()})},methods:{getMonitors:function(){this.house.eletric&&this.getRecorddata("eletric"),this.house.water&&this.getRecorddata("water")},getChargeitems:function(){var e=this,t=new We.a(function(t,a){window.firebase.database().ref("chargeitems").once("value",function(a){e.chargeitems=a.val(),t()})});return t},getRecorddata:function(e){var t=this,a=this,n={eletric:{tname:"eletricmonitors",hmonitors:this.house.eletricmonitors},water:{tname:"watermonitors",hmonitors:this.house.watermonitors}},r=[],i=p()(),o=n[e].hmonitors.map(function(t){var i=new We.a(function(i,o){var l={current:""},s=new We.a(function(a,r){window.firebase.database().ref(n[e].tname+"/"+t+"/records").orderByChild("date").limitToLast(1).once("value",function(e){l.lastrecord=e.val()[b()(e.val())[0]].value,l.lastdate=w.getDate(e.val()[b()(e.val())[0]].date),a()})}),c=new We.a(function(r,i){window.firebase.database().ref(n[e].tname+"/"+t+"/priceid").once("value",function(e){l.id=t,l.price=a.chargeitems[e.val()].price,r()})});We.a.all([s,c]).then(function(){r.push(l),console.log(l),i()})});return i});We.a.all(o).then(function(){console.log(r),"water"==e?t.watermonitors=r:t.eletricmonitors=r,console.log(p()()-i)})},generate:function(){var e=this,t=this,a=0,n=0,r=0,i=0,o=0,l=0;this.eletricmonitors.forEach(function(e){a+=Number(e.lastrecord),n+=Number(e.current),r=e.price});var s="&ef=l"+a+"c"+n+"p"+r;this.watermonitors.forEach(function(e){i+=Number(e.lastrecord),o+=Number(e.current),l=e.price});var c="&wf=l"+i+"c"+o+"p"+l;this.print=s+c,this.house.chargeitems.forEach(function(a){e.print=e.print+"&"+t.chargeitems[a].name+"="+t.chargeitems[a].price+"元/月"}),this.print=this.print+"&租金="+this.house.price+"&number="+this.house.number,this.billon=!0}}}),Ke=Ie,Fe=(a("b24f"),Object(x["a"])(Ke,Ne,Pe,!1,null,"1c8ab5f4",null)),Je=Fe.exports,qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"row-click":e.handleRowclick}},[a("el-table-column",{attrs:{prop:"number",label:"房号",width:"80"}}),a("el-table-column",{attrs:{prop:"address",label:"地址",width:"min-width"}})],1)],1)},Le=[],Qe=a("f499"),Ye=a.n(Qe),Ge={name:"Queryrecords",data:function(){return{tableData:[]}},created:function(){var e=this;window.firebase.database().ref("houses").once("value",function(t){e.tableData=w.Object2Array(t.val())})},methods:{handleRowclick:function(e){this.$router.push({path:"/managerecord/"+Ye()(e.eletricmonitors)})}}},Ue=Ge,Ve=Object(x["a"])(Ue,qe,Le,!1,null,"f8ea8b6e",null),Xe=Ve.exports,Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"houses-head-wrap"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#409EFE","active-value":"watermonitors","inactive-value":"eletricmonitors","active-text":"水表记录","inactive-text":"电表记录"},on:{change:e.handleTypeswitch},model:{value:e.monitortype,callback:function(t){e.monitortype=t},expression:"monitortype"}}),a("div",{staticStyle:{"flex-grow":"1"}}),a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.handleToAdd}},[e._v("添加")])],1),e._l(e.tableData,function(t,n){return a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"monitor-title"},[e._v(e._s("eletricmonitors"==e.monitortype?"电表"+t.name:"水表"+t.name))]),a("el-table",{attrs:{data:t.records}},[a("el-table-column",{attrs:{prop:"value",label:"数值",width:"80"}}),a("el-table-column",{attrs:{prop:"dateformate",label:"日期",width:"min-width"}}),a("el-table-column",{attrs:{label:"操作",width:"min-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1)],1)})],2)},et=[],tt={name:"Managerecord",data:function(){return{tableData:[],monitortype:"",eletricwatched:!1,waterwatched:!1,pagetitle:"水电表记录"}},beforeRouteEnter:function(e,t,a){a(function(e){e.$store.commit("settitle",e.pagetitle)})},created:function(){this.monitortype=this.$store.state.monitortype,this.init()},methods:{init:function(){var e=this,t=p()(),a=this;We.a.all(this.getRecords()).then(function(){console.log(p()()-t),"eletricmonitors"===e.monitortype&&!a.eletricwatched&&(a.watchRecords(),a.eletricwatched=!0),"watermonitors"===e.monitortype&&!a.waterwatched&&(a.watchRecords(),a.waterwatched=!0)})},watchRecords:function(){var e=this,t=this;this.$store.state[this.monitortype].map(function(a){return window.firebase.database().ref(e.monitortype+"/"+a).on("value",function(e){var n={name:e.val().name,id:a,records:w.Object2Array(e.val().records,a)};t.tableData=t.tableData.map(function(e){return e.name===n.name?n:e})})})},getRecords:function(){var e=this,t=this;return this.$store.state[this.monitortype].map(function(a){return window.firebase.database().ref(e.monitortype+"/"+a).once("value",function(e){console.log("k");var n={name:e.val().name,id:a,records:w.Object2Array(e.val().records,a)};t.tableData.push(n)})})},handleEdit:function(e){console.log(e),this.$store.commit("setclickeditem",e),this.$router.push({path:"editrecord"})},handleDelete:function(e){var t=this;this.$confirm("删除 ".concat(e.value," - ").concat(e.dateformate," 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){window.firebase.database().ref(t.monitortype+"/"+e.parentid+"/records/"+e.id).remove(),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleTypeswitch:function(){this.tableData=[],this.$store.commit("setmonitortype",this.monitortype),this.init()},handleToAdd:function(){this.$store.commit("setmonitordetail",this.tableData),this.$router.push({path:"/addrecord"})}}},at=tt,nt=(a("13b9"),Object(x["a"])(at,Ze,et,!1,null,"166831d8",null)),rt=nt.exports,it=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap"},[a("el-form",{attrs:{"label-width":"70px",model:e.record,"label-position":"top"}},[a("el-select",{attrs:{placeholder:"请选择电表"},model:{value:e.monitorid,callback:function(t){e.monitorid=t},expression:"monitorid"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-form-item",{attrs:{label:"数值"}},[a("el-input",{model:{value:e.record.value,callback:function(t){e.$set(e.record,"value",t)},expression:"record.value"}})],1),a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.record.date,callback:function(t){e.$set(e.record,"date",t)},expression:"record.date"}})],1)],1),a("div",{staticClass:"btn-wrap"},[a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.handleToAdd}},[e._v("保存")])],1)],1)},ot=[],lt={name:"Addrecord",data:function(){return{record:{value:"",date:""},monitorid:"",options:[],pagetitle:"新增水电表记录"}},beforeRouteEnter:function(e,t,a){a(function(e){e.$store.commit("settitle",e.pagetitle)})},created:function(){console.log(this.$store.state.monitordetail),this.initOptions()},methods:{handleToAdd:function(){var e=window.firebase.database().ref(this.$store.state.monitortype+"/"+this.monitorid+"/records").push();e.set({value:this.record.value,date:this.record.date.valueOf()}),this.$router.push({path:"/managerecord"})},initOptions:function(){var e={eletricmonitors:"电表",watermonitors:"水表"},t=this;this.$store.state.monitordetail.forEach(function(a){t.options.push({name:e[t.$store.state.monitortype]+a.name,id:a.id})})}}},st=lt,ct=(a("9d19"),Object(x["a"])(st,it,ot,!1,null,"03f210a3",null)),ut=ct.exports,dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap"},[a("el-form",{attrs:{"label-width":"70px",model:e.record,"label-position":"top"}},[a("el-form-item",{attrs:{label:"数值"}},[a("el-input",{model:{value:e.record.value,callback:function(t){e.$set(e.record,"value",t)},expression:"record.value"}})],1),a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.record.date,callback:function(t){e.$set(e.record,"date",t)},expression:"record.date"}})],1)],1),a("div",{staticClass:"btn-wrap"},[a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.handleToAdd}},[e._v("保存")])],1)],1)},mt=[],ft={name:"editrecord",data:function(){return{record:{value:"",date:""},pagetitle:"修改水电表记录"}},beforeRouteEnter:function(e,t,a){a(function(e){e.$store.commit("settitle",e.pagetitle)})},created:function(){this.record.value=this.$store.state.clickeditem.value,this.record.date=new Date(this.$store.state.clickeditem.date)},methods:{handleToAdd:function(){window.firebase.database().ref(this.$store.state.monitortype+"/"+this.$store.state.clickeditem.parentid+"/records/"+this.$store.state.clickeditem.id).set({value:this.record.value,date:this.record.date.valueOf()}),this.$router.push({path:"/managerecord"})}}},pt=ft,ht=(a("8ca9"),Object(x["a"])(pt,dt,mt,!1,null,"32c92946",null)),bt=ht.exports,vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("el-form",{attrs:{model:e.formdata,"label-width":"80px","label-position":"top"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:e.formdata.username,callback:function(t){e.$set(e.formdata,"username",t)},expression:"formdata.username"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{model:{value:e.formdata.password,callback:function(t){e.$set(e.formdata,"password",t)},expression:"formdata.password"}})],1),a("div",{staticClass:"button-wrap"},[a("el-button",{attrs:{type:"primary",round:""},on:{click:e.handleSignin}},[e._v("登录")])],1)],1)],1)},wt=[],gt={name:"Signin",data:function(){return{formdata:{username:"",password:""}}},methods:{handleSignin:function(){var e=this;window.firebase.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION).then(function(){return window.firebase.auth().signInWithEmailAndPassword(e.formdata.username,e.formdata.password).catch(function(e){var t=e.code,a=e.message;"auth/wrong-password"===t?alert("Wrong password."):alert(a),console.log(e)})})}}},yt=gt,xt=(a("9f83"),Object(x["a"])(yt,vt,wt,!1,null,"59aa8ba0",null)),$t=xt.exports,kt=[{path:"/add",component:T},{path:"/hi",component:k},{path:"/chargeitems",component:H},{path:"/addchargeitem",component:q},{path:"/editchargeitem/:id",component:V},{path:"/edithouse/:id",component:ne},{path:"/initrecord/:id",component:ce},{path:"/eletric",component:he},{path:"/water",component:he},{path:"/addfee",component:$e},{path:"/editfee/:id",component:Oe},{path:"/checkout",component:ze},{path:"/generatebill/:id",component:Je},{path:"/queryrecords",component:Xe},{path:"/managerecord",component:rt},{path:"/addrecord",component:ut},{path:"/editrecord",component:bt},{path:"/signin",component:$t}],_t={state:{house:"",eletricmonitors:"",watermonitors:"",monitortype:"eletricmonitors",monitordetail:"",clickeditem:"",title:""},mutations:{sethouse:function(e,t){e.house=t},seteletricmonitors:function(e,t){e.eletricmonitors=t},setwatermonitors:function(e,t){e.watermonitors=t},setmonitortype:function(e,t){e.monitortype=t},setmonitordetail:function(e,t){e.monitordetail=t},setclickeditem:function(e,t){e.clickeditem=t},settitle:function(e,t){e.title=t}}};r["default"].use(l["a"]),r["default"].config.productionTip=!1,r["default"].use(o.a),r["default"].use(s["a"]);var Ct,Et=new l["a"]({routes:kt}),St=new s["a"].Store(_t),Ot=document.getElementById("app");window.firebase.auth().onAuthStateChanged(function(e){e?(console.log("success"),Ct&&(Ot.removeChild(Ct.$el),Ct.$destroy()),Ct=new r["default"]({router:Et,store:St,render:function(e){return e(S)}}).$mount(),Ot.appendChild(Ct.$el)):(console.log("signout"),Ct&&(Ot.removeChild(Ct.$el),Ct.$destroy()),Ct=new r["default"]({render:function(e){return e($t)}}).$mount(),Ot.appendChild(Ct.$el))})},"58b7":function(e,t,a){},"64a9":function(e,t,a){},6622:function(e,t,a){},"664a":function(e,t,a){"use strict";var n=a("6622"),r=a.n(n);r.a},6829:function(e,t,a){"use strict";var n=a("36f0"),r=a.n(n);r.a},"7ba9":function(e,t,a){},"873d":function(e,t,a){"use strict";var n=a("8f0e"),r=a.n(n);r.a},8788:function(e,t,a){},"8ca9":function(e,t,a){"use strict";var n=a("58b7"),r=a.n(n);r.a},"8ee3":function(e,t,a){"use strict";var n=a("3c9c"),r=a.n(n);r.a},"8f0e":function(e,t,a){},"9d19":function(e,t,a){"use strict";var n=a("424e"),r=a.n(n);r.a},"9f83":function(e,t,a){"use strict";var n=a("d65f"),r=a.n(n);r.a},b24f:function(e,t,a){"use strict";var n=a("21a7"),r=a.n(n);r.a},b31d:function(e,t,a){"use strict";var n=a("1dc1"),r=a.n(n);r.a},b3bd:function(e,t,a){"use strict";var n=a("26b1"),r=a.n(n);r.a},b4a2:function(e,t,a){"use strict";var n=a("7ba9"),r=a.n(n);r.a},cd04:function(e,t,a){},d65f:function(e,t,a){},d752:function(e,t,a){"use strict";var n=a("8788"),r=a.n(n);r.a},d89c:function(e,t,a){},e64d:function(e,t,a){}});
//# sourceMappingURL=app.84abc8e6.js.map