!function(t){function e(e){for(var s,r,o=e[0],l=e[1],c=e[2],p=0,u=[];p<o.length;p++)r=o[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);for(d&&d(e);u.length;)u.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={0:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/public/rentadmin/";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;n.push([291,1]),a()}({277:function(t,e,a){"use strict";var s=a(38);a.n(s).a},278:function(t,e,a){"use strict";var s=a(39);a.n(s).a},279:function(t,e,a){"use strict";var s=a(40);a.n(s).a},280:function(t,e,a){"use strict";var s=a(41);a.n(s).a},281:function(t,e,a){"use strict";var s=a(42);a.n(s).a},282:function(t,e,a){"use strict";var s=a(43);a.n(s).a},283:function(t,e,a){"use strict";var s=a(44);a.n(s).a},284:function(t,e,a){"use strict";var s=a(45);a.n(s).a},285:function(t,e,a){"use strict";var s=a(46);a.n(s).a},286:function(t,e,a){"use strict";var s=a(47);a.n(s).a},287:function(t,e,a){"use strict";var s=a(48);a.n(s).a},288:function(t,e,a){"use strict";var s=a(49);a.n(s).a},289:function(t,e,a){"use strict";var s=a(50);a.n(s).a},290:function(t,e,a){"use strict";var s=a(51);a.n(s).a},291:function(t,e,a){"use strict";a.r(e);var s=a(2),i=a(142),n=a.n(i),r=(a(260),a(52)),o=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"100%"}},[e("router-view")],1)};o._withStripped=!0;var l={name:"App"},c=a(1),d=Object(c.a)(l,o,[],!1,null,"7ba5bd90",null);d.options.__file="src/App.vue";var p=d.exports,u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-list-wrap"},[a("Filterbar",{attrs:{handler:t.filterdata}}),t._v(" "),a("div",{staticClass:"m-addbtn-wrap"},[a("el-button",{staticClass:"m-btn-override",attrs:{type:"primary",size:"medium"},on:{click:t.openaddform}},[t._v("添加租盘"),a("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{size:"medium",data:t.tableData}},[a("el-table-column",{staticClass:"m-list-style",attrs:{align:"center",prop:"number",label:"房号"}}),t._v(" "),a("el-table-column",{staticClass:"m-list-style",attrs:{align:"center",prop:"address",label:"地址"}}),t._v(" "),a("el-table-column",{staticClass:"m-list-style",attrs:{align:"center",prop:"action",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-edit-outline m-house-abtn",on:{click:function(a){return t.handleEdit(e.row)}}}),t._v(" "),a("i",{staticClass:"el-icon-delete-solid m-house-abtn",on:{click:function(a){return t.handleDelete(e.row)}}})]}}])})],1),t._v(" "),a("el-dialog",{staticClass:"m-dialog-override",attrs:{width:"90%","show-close":!1,visible:t.AddVisible},on:{"update:visible":function(e){t.AddVisible=e}}},[a("el-form",{attrs:{model:t.postdata,"label-position":"top"}},[a("el-form-item",{attrs:{label:"房号"}},[a("el-input",{attrs:{placeholder:"请输入房号"},model:{value:t.postdata.number,callback:function(e){t.$set(t.postdata,"number",e)},expression:"postdata.number"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"户型"}},[a("el-input",{attrs:{placeholder:"请输入户型"},model:{value:t.postdata.htype,callback:function(e){t.$set(t.postdata,"htype",e)},expression:"postdata.htype"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{placeholder:"请输入地址"},model:{value:t.postdata.address,callback:function(e){t.$set(t.postdata,"address",e)},expression:"postdata.address"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"租金"}},[a("el-input",{attrs:{placeholder:"请输入租金"},model:{value:t.postdata.price,callback:function(e){t.$set(t.postdata,"price",e)},expression:"postdata.price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"押金"}},[a("el-input",{attrs:{placeholder:"请输入租金"},model:{value:t.postdata.subprice,callback:function(e){t.$set(t.postdata,"subprice",e)},expression:"postdata.subprice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"收费项目"}},[a("div",[a("el-checkbox",{model:{value:t.isbtns.iswater,callback:function(e){t.$set(t.isbtns,"iswater",e)},expression:"isbtns.iswater"}},[t._v("水费")]),t._v(" "),t.isbtns.iswater?a("m-meter-card",{attrs:{rules:t.waterrule,type:"water",meters:t.postdata.wmeters,pmeters:t.hwmeters,setbtn:t.setistbtns},on:{"update:meters":function(e){return t.$set(t.postdata,"wmeters",e)}}}):t._e(),t._v(" "),a("el-checkbox",{model:{value:t.isbtns.iseletric,callback:function(e){t.$set(t.isbtns,"iseletric",e)},expression:"isbtns.iseletric"}},[t._v("电费")]),t._v(" "),t.isbtns.iseletric?a("m-meter-card",{attrs:{rules:t.eletricrule,type:"eletric",meters:t.postdata.emeters,pmeters:t.hemeters,setbtn:t.setistbtns},on:{"update:meters":function(e){return t.$set(t.postdata,"emeters",e)}}}):t._e()],1),t._v(" "),a("div",[a("span",[t._v("其他收费")])]),t._v(" "),a("el-select",{attrs:{multiple:"",placeholder:"请选择需要收费的项目"},model:{value:t.postdata.chargeitems,callback:function(e){t.$set(t.postdata,"chargeitems",e)},expression:"postdata.chargeitems"}},t._l(t.othercharge,function(t){return a("el-option",{key:t.cid,attrs:{label:t.name,value:t.cid}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"m-btn-override",attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("保存")]),t._v(" "),a("el-button",{staticClass:"m-btn-override",attrs:{type:"info"},on:{click:t.closeForm}},[t._v("取消")])],1)],1)],1)],1)};u._withStripped=!0;var h=a(0),m=a.n(h),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.meters,function(e,s){return e.del?t._e():a("div",{staticClass:"m-template-wrap"},[a("div",{staticClass:"m-template-body"},[a("div",[a("div",{staticClass:"m-template-up"},[a("span",[t._v(t._s(t.meterlabel+e.number))]),t._v(" "),e.new?a("el-input",{staticClass:"m-input-override",attrs:{placeholder:"请输入"+t.meterlabel+"记录"},on:{change:t.handInputC},model:{value:e.current,callback:function(a){t.$set(e,"current",a)},expression:"element.current"}}):t._e()],1),t._v(" "),a("el-select",{attrs:{placeholder:"请选择计费规则"},on:{change:t.handSelectC},model:{value:e.chargeid,callback:function(a){t.$set(e,"chargeid",a)},expression:"element.chargeid"}},t._l(t.rules,function(t){return a("el-option",{key:t.cid,attrs:{label:t.name,value:t.cid}})}),1)],1),t._v(" "),e.new?t._e():a("i",{staticClass:"el-icon-remove",on:{click:function(e){return t.handledelete(s)}}})])])}),t._v(" "),a("div",{staticClass:"m-template-footer"},[a("i",{staticClass:"el-icon-circle-plus",on:{click:t.add1meter}}),t._v(" "),t.newmeterslength?a("i",{staticClass:"el-icon-remove",on:{click:t.del1meter}}):t._e()])],2)};function v(t){var e=new String(t),a=e.match(/[0-9]*\.([0-9]{0,2})/);if(!a)return e+".00";switch(a[1].length){case 0:return e+"00";case 1:return e+"0";case 2:return a[0]}}function b(t){return t.map(function(t){switch(t.type){case"month":t.uprice=v(t.uprice)+"元/月";break;case"water":t.uprice=v(t.uprice)+"元/m³";break;case"eletric":t.uprice=v(t.uprice)+"元/Kwh"}return t})}function g(t,e){var a,s="";for(a in t){s+=a+"="+t[a]+"&"}return s.slice(0,s.length-1)}function _(t){var e,a={};for(e in t)a[e]=t[e];return a}function w(t){var e=[],a=[],s=[];return Array.isArray(t)&&t.map(function(t){"month"==t.type?s.push(t):"water"==t.type?e.push(t):a.push(t)}),{water:e,eletric:a,other:s}}f._withStripped=!0;var y={props:["rules","type","pmeters","setbtn"],data:function(){return{add:!0,havenewmeter:!1,newmeternum:1,meters:[{number:0,current:0,date:Date.now(),type:this.type,new:!0,del:!1,chargeid:""}]}},created:function(){console.log(this.type+"更新");var t=this;console.log(this.pmeters),0==this.pmeters.length?this.add=!0:(this.pmeters.map(function(e){t.meters.push(_(e))}),this.add=!1,this.meters.shift(),this.newmeternum=this.getmaxnumber())},mounted:function(){var t=this;console.log(this.pmeters),this.meters=[{number:0,current:0,date:Date.now(),type:this.type,new:!0,del:!1,chargeid:""}],0==this.pmeters.length?this.add=!0:(this.pmeters.map(function(e){console.log(e),t.meters.push(_(e))}),this.add=!1,this.meters.shift(),this.newmeternum=this.getmaxnumber()),this.$emit("update:meters",this.meters)},updated:function(){console.log("u")},computed:{newmeterslength:function(){var t=0,e=!1;return this.meters.map(function(a){a.new?t+=1:e=!0}),e?t>0:t>1},meterlabel:function(){return{water:"水表",eletric:"电表"}[this.type]}},methods:{handledelete:function(t){var e=0;this.meters[t].del=!0,this.meters.splice(t,1,this.meters[t]),this.meters.map(function(t){t.del&&(e+=1)}),this.$emit("update:meters",this.meters),e==this.meters.length&&this.setbtn(this.type,!1)},getmaxnumber:function(){var t=this.meters[0].number;return this.meters.map(function(e){e.number>t&&(t=e.number)}),t},handInputC:function(){this.$emit("update:meters",this.meters)},handSelectC:function(t){this.$emit("update:meters",this.meters)},add1meter:function(){this.newmeternum+=1,this.meters.push({number:this.newmeternum,current:0,date:Date.now(),type:this.type,del:!1,chargeid:"",new:!0}),this.$emit("update:meters",this.meters)},del1meter:function(){this.meters.pop();var t=0;this.meters.map(function(e){e.new&&(t+=1)}),0==t&&0==this.meters.length&&this.setbtn(this.type,!1),this.$emit("update:meters",this.meters)}}},x=(a(277),Object(c.a)(y,f,[],!1,null,"6af8dc84",null));x.options.__file="src/component/metercard.vue";var C=x.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-fliter-bar"},[a("el-select",{attrs:{placeholder:"请选择地址"},model:{value:t.Saddr,callback:function(e){t.Saddr=e},expression:"Saddr"}},t._l(t.address,function(t){return a("el-option",{key:t.address,attrs:{label:t.address,value:t.address}})}),1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入房号"},model:{value:t.hnum,callback:function(e){t.hnum=e},expression:"hnum"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handlefilter}},[t._v("筛选")])],1)};k._withStripped=!0,m.a.defaults.baseURL="https://easyhome.applinzi.com/public/index.php/ciwirent";var $={name:"filterbar",props:["handler"],created:function(){var t=this;m.a.get("housepage/gethaddrs").then(function(e){t.address=e.data}).catch(function(t){console.log(t)}).finally(function(){})},data:function(){return{Saddr:"",address:[],hnum:""}},methods:{handlefilter:function(){this.handler({number:this.hnum,address:this.Saddr})}}},S=(a(278),Object(c.a)($,k,[],!1,null,"9783b780",null));S.options.__file="src/component/filterbar.vue";var O=S.exports;m.a.defaults.baseURL="https://easyhome.applinzi.com/public/index.php/ciwirent";var j={components:{"m-meter-card":C,Filterbar:O},created:function(){var t=this;m.a.get("/housepage").then(function(e){t.$emit("update:title",t.title),t.$parent.$refs.drawer.closeDrawer(),t.Allhouses=e.data,t.tableData=e.data,console.log(t.Allhouses===t.tableData)}).catch(function(t){console.log(t)}).finally(function(){})},data:function(){return{tableData:[],Allhouses:[],title:"我的租盘",AddVisible:!1,chargeitems:"",edit:!1,wmeters:1,emeters:1,isbtns:{iswater:!1,iseletric:!1},test:[],hwmeters:[],hemeters:[],postdata:{id:"",number:"",address:"",price:"",subprice:"",htype:"",wmeters:[],emeters:[],chargeitems:[]}}},computed:{waterrule:function(){return w(this.chargeitems).water},eletricrule:function(){return w(this.chargeitems).eletric},othercharge:function(){return w(this.chargeitems).other}},methods:{filterdata:function(t){this.tableData=this.Allhouses.filter(function(e){return e.number==t.number&&e.address==t.address})},setistbtns:function(t,e){this.isbtns["is"+t]=e},getMetersById:function(t){var e=this;return new Promise(function(a,s){m.a.post("/housepage/getmeters",{id:t.id},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(t){var s,i,n,r=(s=t.data,i=[],n=[],0==s.length?{wmeters:i,emeters:n}:(s.forEach(function(t){"water"==t.type?i.push(t):n.push(t)}),{wmeters:i,emeters:n}));e.hwmeters=r.wmeters,e.isbtns.iswater=0!=r.wmeters.length,e.hemeters=r.emeters,e.isbtns.iseletric=0!=r.emeters.length,a()}).catch(function(t){console.log(t)})})},getChargeById:function(t){var e=this;return new Promise(function(a,s){m.a.post("/housepage/getcharge",{id:t.id},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(s){var i=_(t);i.chargeitems=s.data,e.postdata=i,a()}).catch(function(t){console.log(t)})})},resetPostdata:function(){this.hwmeters=[],this.hemeters=[],this.isbtns.iswater=!1,this.isbtns.iseletric=!1,this.postdata={id:"",number:"",address:"",price:"",subprice:"",htype:"",chargeitems:[],wmeters:[],emeters:[]}},getAlldata:function(){var t=this;m.a.get("/housepage").then(function(e){t.tableData=e.data}).catch(function(t){console.log(t)}).finally(function(){})},handleEdit:function(t){console.log(this.postdata),this.isbtns={iswater:!1,iseletric:!1};var e=this;e.edit=!0,Promise.all([this.getChargeById(t),this.getMetersById(t),this.getChargeitems()]).then(function(){e.postdata.emeters=e.hemeters,e.postdata.wmeters=e.hwmeters,e.AddVisible=!0}).catch(function(t){console.log(t)})},handleDelete:function(t){console.log(t);var e=this;this.$confirm("确定删除 ".concat(t.number+"-"+t.address," ?"),{customClass:"m-popup-override",confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"m-cancelbtn-override",showClose:!1,center:!0,type:"warning"}).then(function(){m.a.post("/housepage/delete",{id:t.id},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(t){e.getAlldata()}).catch(function(t){console.log(t)}).finally()}).catch(function(){})},openaddform:function(){var t=this;this.edit=!1,this.resetPostdata(),this.getChargeitems().then(function(){t.AddVisible=!0}).catch(function(t){console.log(t)})},getChargeitems:function(){var t=this;return new Promise(function(e,a){m.a.get("/chargeitemspage").then(function(a){t.chargeitems=a.data,e()}).catch(function(t){console.log(t)})})},handleSubmit:function(){var t=this;this.isbtns.iswater||(this.postdata.wmeters=[]),this.isbtns.iseletric||(this.postdata.emeters=[]),console.log(this.postdata),m.a.post(this.edit?"/housepage/update":"/housepage/add",this.postdata,{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(e){t.closeForm(),t.getAlldata()}).catch(function(t){console.log(t)}).finally()},closeForm:function(){this.AddVisible=!1}}},A=(a(279),Object(c.a)(j,u,[],!1,null,"706f25e8",null));A.options.__file="src/Houses.vue";var R=A.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-list-wrap"},[a("div",{staticClass:"m-addbtn-wrap"},[a("el-button",{staticClass:"m-btn-override",attrs:{type:"primary",size:"medium"},on:{click:t.openaddform}},[t._v("添加收费项目"),a("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{size:"medium",data:t.tableData}},[a("el-table-column",{staticClass:"m-list-style",attrs:{align:"center",prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{staticClass:"m-list-style",attrs:{align:"center",prop:"uprice",label:"价格"}}),t._v(" "),a("el-table-column",{staticClass:"m-list-style",attrs:{align:"center",prop:"action",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-edit-outline m-house-abtn",on:{click:function(a){return t.handleEdit(e.row)}}}),t._v(" "),a("i",{staticClass:"el-icon-delete-solid m-house-abtn",on:{click:function(a){return t.handleDelete(e.row)}}})]}}])})],1),t._v(" "),a("el-dialog",{attrs:{width:"90%","show-close":!1,visible:t.AddVisible},on:{"update:visible":function(e){t.AddVisible=e}}},[a("el-form",{attrs:{model:t.postdata,"label-position":"top"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.postdata.name,callback:function(e){t.$set(t.postdata,"name",e)},expression:"postdata.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"收费类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.postdata.type,callback:function(e){t.$set(t.postdata,"type",e)},expression:"postdata.type"}},t._l(t.chargetypes,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"价格"}},[a("el-input",{attrs:{placeholder:"请输入价格"},model:{value:t.postdata.uprice,callback:function(e){t.$set(t.postdata,"uprice",e)},expression:"postdata.uprice"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"m-btn-override",attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("保存")]),t._v(" "),a("el-button",{staticClass:"m-btn-override",attrs:{type:"info"},on:{click:t.closeForm}},[t._v("取消")])],1)],1)],1)],1)};D._withStripped=!0,m.a.defaults.baseURL="http://easyhome.applinzi.com/public/index.php/ciwirent",m.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var Y={created:function(){var t=this;m.a.get("/chargeitemspage").then(function(e){t.$emit("update:title",t.title),t.$parent.$refs.drawer.closeDrawer(),t.tableData=b(e.data)}).catch(function(t){console.log(t)}).finally(function(){})},data:function(){return{tableData:[],title:"收费项目",edit:!1,postdata:{cid:"",name:"",uprice:"",type:""},chargetypes:[{label:"月费",value:"month"},{label:"水费",value:"water"},{label:"电费",value:"eletric"}],AddVisible:!1}},methods:{resetPostdata:function(){this.postdata={cid:"",name:"",uprice:"",type:""}},getAlldata:function(){var t=this;m.a.get("/chargeitemspage").then(function(e){t.tableData=b(e.data)}).catch(function(t){console.log(t)}).finally(function(){})},handleEdit:function(t){console.log(t),this.edit=!0,this.postdata=_(t),this.AddVisible=!0,this.postdata.uprice=this.postdata.uprice.match(/[\.0-9]+/)[0]},handleDelete:function(t){var e=this,a=this;this.$confirm("确定删除 ".concat(t.name,"?"),{customClass:"m-popup-override",confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"m-cancelbtn-override",showClose:!1,center:!0,type:"warning"}).then(function(){e.$message({type:"success",message:"删除成功!"}),m.a.post("/chargeitemspage/delete",{cid:t.cid},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[g]}).then(function(t){a.getAlldata()}).catch(function(t){console.log(t)}).finally()}).catch(function(){})},openaddform:function(){this.resetPostdata(),this.AddVisible=!0,this.edit=!1},handleSubmit:function(){var t=this;m.a.post(this.edit?"/chargeitemspage/update":"/chargeitemspage/add",this.postdata,{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[g]}).then(function(e){t.closeForm(),t.getAlldata()}).catch(function(t){console.log(t)}).finally()},closeForm:function(){this.AddVisible=!1}}},E=(a(280),Object(c.a)(Y,D,[],!1,null,"411ce023",null));E.options.__file="src/Chargeitems.vue";var N=E.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-list-wrap"},[a("div",{staticClass:"m-records-tab",on:{click:function(e){t.dialogVisible=!0}}},[t._m(0),t._v(" "),a("div",{staticClass:"m-records-title"},[t._v("按租盘查询")])]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible,width:"90%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"m-dialog-title"},[t._v("选择租盘")]),t._v(" "),a("el-form",{attrs:{"label-position":"top"}},[a("el-form-item",{attrs:{label:"房号"}},[a("el-input",{attrs:{placeholder:"请输入房号"},model:{value:t.postdata.number,callback:function(e){t.$set(t.postdata,"number",e)},expression:"postdata.number"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-select",{attrs:{placeholder:"请选择地址"},model:{value:t.postdata.address,callback:function(e){t.$set(t.postdata,"address",e)},expression:"postdata.address"}},t._l(t.address,function(t){return a("el-option",{key:t.address,attrs:{label:t.address,value:t.address}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"m-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)],1)],1)};T._withStripped=!0,m.a.defaults.baseURL="https://easyhome.applinzi.com/public/index.php/ciwirent";var M={created:function(){var t=this;m.a.get("/recordspage").then(function(e){t.address=e.data}).catch(function(t){console.log(t)}).finally(function(){}),this.$emit("update:title",this.title),this.$parent.$refs.drawer.closeDrawer()},data:function(){return{title:"水电表记录",dialogVisible:!1,postdata:{number:"",address:""},address:[]}},methods:{handleSubmit:function(){var t=this;console.log(this.postdata);var e=this;m.a.post("/recordspage/gethid",this.postdata,{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(a){var s;(console.log(a.data),a.data.meters&&a.data.id)?e.$router.push({name:"Meterrecords",params:{hid:a.data.id,info:e.postdata}}):(s=a.data.id?"该租盘并没有收取水电费":"输入有误，该租盘并不存在",t.$message.warning(s),t.dialogVisible=!1)}).catch(function(t){console.log(t)})}}},X=(a(281),Object(c.a)(M,T,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"m-records-bg"},[e("i",{staticClass:"el-icon-s-home"})])}],!1,null,"04c53559",null));X.options.__file="src/Records.vue";var F=X.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-list-wrap"},[a("div",{staticClass:"m-meter-header"},[a("div",{staticClass:"m-meter-header-body",on:{click:t.tt}},[a("div",{staticClass:"m-meter-header-number"},[t._v(t._s(t.hinfo.number))]),t._v(" "),a("div",{staticClass:"m-meter-header-address"},[t._v(t._s(t.hinfo.address))])])]),t._v(" "),a("div",{staticClass:"m-meters-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.datascopy.meters,"row-class-name":"m-meter-style"},on:{"row-click":t.handlemeteredit}},[a("el-table-column",{attrs:{prop:"name",label:"表名",align:"center","min-width":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"data",label:"最后记录",align:"center","min-width":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",align:"center","min-width":""}})],1)],1),t._v(" "),a("div",{staticClass:"m-content-wrap"},[a("div",{staticClass:"m-mode-bar"},[a("el-radio",{attrs:{label:"compare"},model:{value:t.displaymode,callback:function(e){t.displaymode=e},expression:"displaymode"}},[t._v("对比表格")]),t._v(" "),a("el-radio",{attrs:{label:"independent"},model:{value:t.displaymode,callback:function(e){t.displaymode=e},expression:"displaymode"}},[t._v("单独表格")])],1),t._v(" "),"compare"==t.displaymode?a("div",[a("div",{staticClass:"m-compare-topbar"},[a("el-date-picker",{attrs:{"value-format":"yyyy",type:"year",placeholder:"选择年"},model:{value:t.compareYear,callback:function(e){t.compareYear=e},expression:"compareYear"}}),t._v(" "),a("i",{staticClass:"el-icon-circle-plus m-plus-btn",on:{click:t.handlecompareadd}})],1),t._v(" "),a("el-table",{attrs:{data:t.comparetable}},[a("el-table-column",{attrs:{fixed:"",align:"center",prop:"date",label:"日期",width:"80"}}),t._v(" "),t._l(t.comparetabledata,function(e){return a("el-table-column",{attrs:{prop:String(e.id),align:"center",label:t.swtype[e.type]+e.number,width:"60"}})}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"action",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-edit-outline m-house-abtn",on:{click:function(a){return t.handlecEdit(e.row)}}}),t._v(" "),a("i",{staticClass:"el-icon-delete-solid m-house-abtn",on:{click:function(a){return t.handlecDelete(e.row)}}})]}}],null,!1,1360677837)})],2)],1):t._e(),t._v(" "),"independent"==t.displaymode?a("div",[a("div",{staticClass:"m-idptable-addwrap"},[a("el-button",{attrs:{type:"primary",width:"100%"},on:{click:t.handleidpadd}},[t._v("新增记录")])],1),t._v(" "),a("div",{staticClass:"m-select-bar"},[a("el-select",{staticClass:"m-select-meter",attrs:{placeholder:"请选择"},model:{value:t.postdata.mid,callback:function(e){t.$set(t.postdata,"mid",e)},expression:"postdata.mid"}},t._l(t.ometers,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy",type:"year",placeholder:"选择年"},model:{value:t.indepYear,callback:function(e){t.indepYear=e},expression:"indepYear"}})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.idptabledata,stripe:!0}},[a("el-table-column",{staticClass:"m-list-style",attrs:{prop:"data",label:"记录",align:"center"}}),t._v(" "),a("el-table-column",{staticClass:"m-list-style",attrs:{prop:"date",label:"日期",align:"center"}}),t._v(" "),a("el-table-column",{staticClass:"m-list-style",attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-edit-outline m-meter-btn",on:{click:function(a){return t.handleEdit(e.row)}}}),t._v(" "),a("i",{staticClass:"el-icon-delete-solid m-meter-btn",on:{click:function(a){return t.handleDelete(e.row)}}})]}}],null,!1,2733271981)})],1)],1):t._e()]),t._v(" "),t.datascopy.meters?a("el-dialog",{attrs:{title:t.cformtitle,visible:t.cformVisible,"show-close":!1,width:"90%"},on:{"update:visible":function(e){t.cformVisible=e}}},[a("div",[a("span",[t._v(t._s(t.cmetername))])]),t._v(" "),a("div",{staticClass:"m-cform-input"},[t.cmeternum<t.datascopy.meters.length?a("el-input",{attrs:{placeholder:"请输入记录"},model:{value:t.cmeterdata,callback:function(e){t.cmeterdata=e},expression:"cmeterdata"}}):t._e()],1),t._v(" "),a("div",{staticClass:"m-cform-date"},[t.cmeternum==t.datascopy.meters.length?a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择年"},model:{value:t.cpostdate.date,callback:function(e){t.$set(t.cpostdate,"date",e)},expression:"cpostdate.date"}}):t._e()],1),t._v(" "),a("div",{staticClass:"m-cform-next"},[t.cmeternum<t.datascopy.meters.length?a("el-button",{attrs:{type:"primary"},on:{click:t.handlecomaddnext}},[t._v("下一项")]):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cformVisible=!1}}},[t._v("取 消")]),t._v(" "),t.cmeternum==t.datascopy.meters.length?a("el-button",{attrs:{type:"primary"},on:{click:t.haddandeditsumbit}},[t._v("保 存")]):t._e()],1)]):t._e(),t._v(" "),t.datascopy.meters?a("el-dialog",{staticClass:"m-iform-wrap",attrs:{title:t.iformtitle,visible:t.iformVisible,"show-close":!1,width:"90%"},on:{close:t.handleiformclose,"update:visible":function(e){t.iformVisible=e}}},[a("div",[a("span",[t._v(t._s(t.cmetername))])]),t._v(" "),a("div",{staticClass:"m-iform-input"},[a("el-input",{attrs:{placeholder:"请输入记录"},model:{value:t.cmeterdata,callback:function(e){t.cmeterdata=e},expression:"cmeterdata"}})],1),t._v(" "),a("div",{staticClass:"m-iform-date"},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.cpostdate.date,callback:function(e){t.$set(t.cpostdate,"date",e)},expression:"cpostdate.date"}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.iformVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.hiaddandeditsumbit}},[t._v("保 存")])],1)]):t._e()],1)};V._withStripped=!0;var q=function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"tabs",staticClass:"m-tabs-wrap"},[this._t("default")],2),this._v(" "),e("div",{staticClass:"m-selecttabs-indicator"},[e("div",{ref:"indicator"})])])};q._withStripped=!0;var P=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"m-singetab-wrap",class:{isactive:this.active},on:{click:this.handleClick}},[this._t("default")],2)};P._withStripped=!0;var B={name:"",props:["name","nowactive","type"],data:function(){return{active:!1,position:""}},created:function(){},computed:{},methods:{handleClick:function(){this.$parent.handleClick(this)}}},z=(a(282),Object(c.a)(B,P,[],!1,null,"11b293f2",null));z.options.__file="src/component/singletab.vue";var J,I=z.exports;function L(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var W=(L(J={name:"",components:{"m-s-tab":I},model:{prop:"tabactive",event:"updateactive"},props:["tabactive"],created:function(){},mounted:function(){var t,e=this,a=this.$refs.tabs.children.length,s=window.document.documentElement.style.fontSize.match(/[0-9]+/);this.hpadding=.2*s[0];for(var i=0;i<a;i++)0==i?t=this.hpadding/2:t+=this.$refs.tabs.children[i-1].offsetWidth,this.widths.push({element:this.$refs.tabs.children[i],width:this.$refs.tabs.children[i].offsetWidth,position:t});console.log(this.widths),this.$children.map(function(t){t.name==e.tabactive?(t.active=!0,e.nactive=t):t.active=!1,e.widths.map(function(e){e.element===t.$el&&(t.position=e.position)})}),this.$refs.indicator.style.width="".concat(this.nactive.$el.offsetWidth-this.hpadding,"px"),this.$refs.indicator.style.transform="translateX(".concat(this.nactive.position,"px)")}},"props",["tabactive"]),L(J,"data",function(){return{nactive:{},widths:[],htmlfontsize:0}}),L(J,"methods",{handleClick:function(t){this.nactive.active=!1,t.active=!0,this.nactive=t,this.$refs.indicator.style.width="".concat(t.$el.offsetWidth-this.hpadding,"px"),this.$refs.indicator.style.transform="translateX(".concat(t.position,"px)"),this.$emit("updateactive",t.name),this.$emit("tabclick",t)}}),J),U=(a(283),Object(c.a)(W,q,[],!1,null,"4e804825",null));U.options.__file="src/component/selecttabs.vue";var H=U.exports;m.a.defaults.baseURL="https://easyhome.applinzi.com/public/index.php/ciwirent";var K={name:"",components:{"m-selecttabs":H,"m-singetab":I},created:function(){this.init()},computed:{oyears:function(){var t=[];return""!=this.postdata.mid&&(this.datascopy.years[this.postdata.mid][0]&&(this.postdata.year=this.datascopy.years[this.postdata.mid][0].YEARS),t=this.datascopy.years[this.postdata.mid]),t},idptabledata:function(){var t=this;return this.datascopy.records[this.postdata.mid].filter(function(e){return e.date.substring(0,4)==t.indepYear})},metersobj:function(){var t={};return this.datascopy.meters.forEach(function(e){t[e.id]=e}),t},comparetable:function(){var t,e={},a=0;this.datascopy.records&&(t=Object.values(this.datascopy.records)),console.log(t),Array.isArray(t)&&t.forEach(function(t){t.forEach(function(t){e[t.date]?(e[t.date].datas.push(t),e[t.date][t.mid]=t.data,e[t.date].rids[t.mid]=t.id,parseInt(t.date.substring(0,4))>a&&(a=parseInt(t.date.substring(0,4)))):(e[t.date]={date:t.date,rids:{},datas:[]},e[t.date].datas.push(t),e[t.date].rids[t.mid]=t.id,e[t.date][t.mid]=t.data,parseInt(t.date.substring(0,4))>a&&(a=parseInt(t.date.substring(0,4))))})}),"0"==this.compareYear&&(this.compareYear=String(a));var s=this,i=Object.values(e).filter(function(t){return t.date.substring(0,4)==s.compareYear});return console.log(i),i}},data:function(){return{cformtitle:"",iformtitle:"",compareYear:"0",indepYear:"2020",filterrecords:[],cpostdate:{records:[],date:""},medit:!1,meditid:"",iformVisible:!1,cedit:!1,iedit:!1,ieditrid:"",ceditdata:{},cmeternum:0,cmetername:"",cmeterdata:"",cformVisible:!1,displaymode:"compare",activetype:"water",cmeter:"0",ometers:[],hinfo:{number:"",address:""},comparetabledata:[],datascopy:{},postdata:{mid:"",year:""},swtype:{water:"水表",eletric:"电表"},options:[{label:"水表0",value:"0"},{label:"水表1",value:"1"}],tableData:[]}},methods:{init:function(){var t=this;this.hinfo=this.$route.params.info,m.a.post("/recordspage/getrecords",this.$route.params,{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(e){console.log(e.data),t.datascopy=e.data,t.comparetabledata=e.data.meters,t.postdata.mid=t.datascopy.wmeterdefault,t.ometers=e.data.meters;var a=t.datascopy.years[t.postdata.mid].length;t.indepYear=String(t.datascopy.years[t.postdata.mid][a-1].YEARS)}).catch(function(t){console.log(t)})},handleiformclose:function(){},handleCyearchange:function(t){},handlemeteredit:function(t){console.log(t),this.iedit=!1,this.medit=!0,this.cpostdate.records=[],this.iformtitle="修改最后记录",this.iformVisible=!0,this.cmetername=t.name,this.cmeterdata=t.data,this.cpostdate.date=t.date,this.meditid=t.id},handleidpadd:function(){console.log(this.ometers),this.iedit=!1,this.medit=!1,this.cmetername=this.swtype[this.metersobj[this.postdata.mid].type]+this.metersobj[this.postdata.mid].number,this.cmeterdata="",this.cpostdate.records=[],this.cpostdate.date="",this.iformVisible=!0,this.iformtitle="新增记录"},hiaddandeditsumbit:function(){var t,e=this;switch(!0){case this.iedit:this.cpostdate.records.push({rid:this.ieditrid,data:this.cmeterdata}),t="editallrecords",console.log("133");break;case this.medit:this.cpostdate.records.push({mid:this.meditid,data:this.cmeterdata}),t="editmeter",console.log("233");break;default:this.cpostdate.records.push({id:this.postdata.mid,data:this.cmeterdata}),t="addallrecords",console.log("333")}console.log(this.cpostdate),m.a.post("/recordspage/"+t,this.cpostdate,{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(t){e.iformVisible=!1,e.init()}).catch(function(t){console.log(t)})},haddandeditsumbit:function(){var t,e=this;t=this.cedit?"editallrecords":"addallrecords",m.a.post("/recordspage/"+t,this.cpostdate,{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(t){e.cformVisible=!1,e.init()}).catch(function(t){console.log(t)})},handlecEdit:function(t){t.datas.length==this.datascopy.meters.length?(this.ceditdata=t,this.cedit=!0,this.cmeternum=0,this.cpostdate.records=[],this.cpostdate.date="",this.cformtitle="批量修改记录",this.cformVisible=!0,this.cmetername=this.swtype[this.datascopy.meters[this.cmeternum].type]+this.datascopy.meters[this.cmeternum].number,this.cmeterdata=this.ceditdata[this.datascopy.meters[this.cmeternum].id]):this.$confirm("".concat(t.date,"记录不能进行批量修改"),{confirmButtonText:"确定",showClose:!1,center:!0,type:"warning"}).then(function(){}).catch(function(){})},handlecDelete:function(t){var e=this;t.datas.length!=this.datascopy.meters.length?this.$confirm("".concat(t.date,"记录不能进行批量删除"),{confirmButtonText:"确定",showClose:!1,center:!0,type:"warning"}).then(function(){}).catch(function(){}):this.$confirm("确定要删除".concat(t.date,"这条记录?"),{confirmButtonText:"确定",cancelButtonText:"取消",showClose:!1,center:!0,type:"warning"}).then(function(){m.a.post("/recordspage/deleteallrecord",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(t){e.init()}).catch(function(t){console.log(t)})}).catch(function(){})},handlecomaddnext:function(){var t={};t.id=this.datascopy.meters[this.cmeternum].id,this.cedit&&(t.rid=this.ceditdata.rids[t.id]),t.data=this.cmeterdata,this.cpostdate.records.push(t),this.cmeternum+=1,this.cmeternum<this.datascopy.meters.length?(this.cmetername=this.swtype[this.datascopy.meters[this.cmeternum].type]+this.datascopy.meters[this.cmeternum].number,this.cedit?this.cmeterdata=this.ceditdata[this.datascopy.meters[this.cmeternum].id]:this.cmeterdata=""):(this.cmetername="日期",this.cedit&&(this.cpostdate.date=this.ceditdata.date)),console.log(this.cpostdate)},handlecompareadd:function(){this.cedit=!1,this.cmeternum=0,this.cmeterdata="",this.cpostdate.records=[],this.cpostdate.date="",this.cformtitle="批量新增记录",this.cformVisible=!0,this.cmetername=this.swtype[this.datascopy.meters[this.cmeternum].type]+this.datascopy.meters[this.cmeternum].number},handleSubmit:function(){var t=this;console.log(this.postdata),m.a.post("/recordspage/getrecordsbymidandyear",this.postdata,{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(e){t.tableData=e.data}).catch(function(t){console.log(t)})},tt:function(){console.log(this.activetype)},handleEdit:function(t){console.log(t),this.medit=!1,this.iedit=!0,this.ieditrid=t.id,this.cpostdate.records=[],this.cpostdate.date=t.date,this.cmetername=this.swtype[this.metersobj[t.mid].type]+this.metersobj[t.mid].number,this.cmeterdata=t.data,this.iformVisible=!0,this.iformtitle="修改记录"},handleDelete:function(t){var e=this;console.log(t),this.$confirm("确定要删除这条记录?",{confirmButtonText:"确定",cancelButtonText:"取消",showClose:!1,center:!0,type:"warning"}).then(function(){m.a.post("/recordspage/deleteallrecord",{datas:[t]},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(t){e.init()}).catch(function(t){console.log(t)})}).catch(function(){})},switchDefaultdatas:function(t){var e={water:"w",eletric:"e"};this.postdata.mid=this.datascopy[e[t]+"meterdefault"],this.ometers=this.datascopy[t],this.tableData=this.datascopy[e[t]+"records"]},handletypeswitch:function(t){this.switchDefaultdatas(t)}}},G=(a(284),Object(c.a)(K,V,[],!1,null,"f14bd2dc",null));G.options.__file="src/Meterrecords.vue";var Q=G.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-list-wrap"},[a("div",{staticClass:"m-meter-header"},[a("div",{staticClass:"m-meter-header-body"},[a("div",{staticClass:"m-meter-header-number"},[t._v(t._s(t.houseinfo.number))]),t._v(" "),a("div",{staticClass:"m-meter-header-address"},[t._v(t._s(t.houseinfo.address))])])]),t._v(" "),t.billhistory?t._e():a("div",{staticClass:"m-billhistory-btn",on:{click:t.billhistoryinit}},[t._v("历史账单 "),a("i",{staticClass:"el-icon-arrow-right"})]),t._v(" "),t.billhistory?a("div",{staticClass:"m-billhistory-btn",on:{click:t.inputrecordinit}},[a("i",{staticClass:"el-icon-arrow-left"}),t._v(" 抄表")]):t._e(),t._v(" "),t.billhistory?t._e():a("div",{staticClass:"m-input-wrap"},[t._l(t.emeters,function(e){return t.emeters.length>0?a("div",{staticClass:"m-input-card"},[a("div",{staticClass:"m-input-title"},[t._v(t._s("电表"+e.number))]),t._v(" "),a("div",{staticClass:"m-input-last"},[t._v(t._s("末次记录:"+e.data+"  "+e.date))]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",disabled:t.showbill},model:{value:e.current,callback:function(a){t.$set(e,"current",a)},expression:"item.current"}},[a("template",{slot:"prepend"},[t._v("本次记录")])],2)],1):t._e()}),t._v(" "),t._l(t.wmeters,function(e){return t.wmeters.length>0?a("div",{staticClass:"m-input-card"},[a("div",{staticClass:"m-input-title"},[t._v(t._s("水表"+e.number))]),t._v(" "),a("div",{staticClass:"m-input-last"},[t._v(t._s("末次记录:"+e.data+"  "+e.date))]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",disabled:t.showbill},model:{value:e.current,callback:function(a){t.$set(e,"current",a)},expression:"item.current"}},[a("template",{slot:"prepend"},[t._v("本次记录")])],2)],1):t._e()}),t._v(" "),a("div",[a("el-checkbox",{model:{value:t.recordcheckout,callback:function(e){t.recordcheckout=e},expression:"recordcheckout"}},[t._v("离开登记")])],1),t._v(" "),a("div",{staticClass:"m-input-footer"},[a("el-button",{attrs:{type:"primary",disabled:t.showbill},on:{click:t.handlegeneratebill}},[t._v("生成账单")])],1)],2),t._v(" "),a("div",{staticClass:"m-billhis-select-wrap"},[t.billhistory?a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handlehisbillgenerate},model:{value:t.billnum,callback:function(e){t.billnum=e},expression:"billnum"}},t._l(t.billhisoptions,function(t,e){return a("el-option",{key:e,attrs:{label:t.date,value:e}})}),1):t._e()],1),t._v(" "),t.showbill?a("m-bill",{attrs:{billdata:t.mbill}}):t._e()],1)};Z._withStripped=!0;var tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-bill-wrap"},[t.emeters.length>0?a("table",{staticClass:"m-bill-table"},[t._m(0),t._v(" "),t._l(t.emeters,function(e,s){return a("tr",[0==s?a("th",{staticClass:"m-bill-rowhead",attrs:{rowspan:t.emeters.length}},[t._v("电费")]):t._e(),t._v(" "),a("td",[t._v(t._s("电表"+e.number))]),t._v(" "),a("td",[t._v(t._s(Number(e.current).toFixed(2)))]),t._v(" "),a("td",[t._v(t._s(Number(e.data).toFixed(2)))]),t._v(" "),a("td",[t._v(t._s(Number(e.current-e.data).toFixed(2)))]),t._v(" "),a("td",[t._v(t._s(Number(e.uprice).toFixed(2)))]),t._v(" "),a("td",[t._v(t._s(Number(e.total).toFixed(2)))])])}),t._v(" "),a("tr",[a("th",[t._v("小计")]),t._v(" "),a("td",{attrs:{colspan:"5"}}),t._v(" "),a("th",[t._v(t._s(Number(t.efee).toFixed(2)))])])],2):t._e(),t._v(" "),t.wmeters.length>0?a("table",{staticClass:"m-bill-table"},[t._m(1),t._v(" "),t._l(t.wmeters,function(e,s){return a("tr",[0==s?a("th",{staticClass:"m-bill-rowhead",attrs:{rowspan:t.wmeters.length}},[t._v("水费")]):t._e(),t._v(" "),a("td",[t._v(t._s("水表"+e.number))]),t._v(" "),a("td",[t._v(t._s(Number(e.current).toFixed(2)))]),t._v(" "),a("td",[t._v(t._s(Number(e.data).toFixed(2)))]),t._v(" "),a("td",[t._v(t._s(Number(e.current-e.data).toFixed(2)))]),t._v(" "),a("td",[t._v(t._s(Number(e.uprice).toFixed(2)))]),t._v(" "),a("td",[t._v(t._s(Number(e.total).toFixed(2)))])])}),t._v(" "),a("tr",[a("th",[t._v("小计")]),t._v(" "),a("td",{attrs:{colspan:"5"}}),t._v(" "),a("th",[t._v(t._s(Number(t.wfee).toFixed(2)))])])],2):t._e(),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"收款项目"}}),t._v(" "),a("el-table-column",{attrs:{prop:"uprice",label:"价格"}})],1),t._v(" "),a("div",{staticClass:"m-print-btn-wrap"},[a("a",{staticClass:"m-print-btn",attrs:{href:t.oldprintbaseurl.substring(0,t.oldprintbaseurl.length-1)}},[t._v("打印")])])],1)};tt._withStripped=!0;var et={props:["billdata"],data:function(){return{efee:0,wfee:0,emeters:[],wmeters:[],oldprintbaseurl:"mprint://myprint.ciwi/easyhome?"}},computed:{tableData:function(){var t=this;console.log("comu");var e,a=this;a.efee=0,a.wfee=0,this.oldprintbaseurl="mprint://myprint.ciwi/easyhome?";var s=0,i=0,n=0,r=0,o=0,l=0;this.emeters=this.billdata.emeters,this.wmeters=this.billdata.wmeters,this.oldprintbaseurl=this.oldprintbaseurl+"number="+this.billdata.house.number+"&租金="+this.billdata.house.price+"&",(e=this.billdata.chargeitems.map(function(e){return t.oldprintbaseurl=t.oldprintbaseurl+e.name+"="+e.uprice+"&",e})).push({name:"租金",uprice:Number(this.billdata.house.price).toFixed(2)}),this.emeters.map(function(t){t.total=(t.current-t.data)*t.uprice,a.efee+=t.total,l=t.uprice,r+=parseInt(t.data),o+=parseInt(t.current)}),this.oldprintbaseurl=this.oldprintbaseurl+"ef=l"+r+"c"+o+"p"+l+"&",this.emeters.length>0&&e.push({name:"电费",uprice:Number(this.efee).toFixed(2)}),this.wmeters.map(function(t){t.total=(t.current-t.data)*t.uprice,a.wfee+=t.total,n=t.uprice,s+=parseInt(t.data),i+=parseInt(t.current)}),this.oldprintbaseurl=this.oldprintbaseurl+"wf=l"+s+"c"+i+"p"+n+"&",this.wmeters.length>0&&e.push({name:"水费",uprice:Number(this.wfee).toFixed(2)});var c=0;return e.map(function(t){c+=parseFloat(t.uprice)}),e.push({name:"合计",uprice:Number(c).toFixed(2)}),console.log(e),e}},created:function(){console.log(this.billdata),console.log("c")},mounted:function(){console.log("m")},beforeupupdate:function(){console.log("bu")},updated:function(){console.log("u"),console.log(this.billdata)}},at=(a(285),Object(c.a)(et,tt,[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th"),t._v(" "),a("th",[t._v("电表")]),t._v(" "),a("th",[t._v("本次度数")]),t._v(" "),a("th",[t._v("末次度数")]),t._v(" "),a("th",[t._v("用电量")]),t._v(" "),a("th",[t._v("电价")]),t._v(" "),a("th",[t._v("总价")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th"),t._v(" "),a("th",[t._v("水表")]),t._v(" "),a("th",[t._v("本次度数")]),t._v(" "),a("th",[t._v("末次度数")]),t._v(" "),a("th",[t._v("用水量")]),t._v(" "),a("th",[t._v("水价")]),t._v(" "),a("th",[t._v("总价")])])}],!1,null,"5bde9d72",null));at.options.__file="src/component/bill.vue";var st=at.exports;m.a.defaults.baseURL="https://easyhome.applinzi.com/public/index.php/ciwirent";var it={components:{"m-bill":st},data:function(){return{title:"抄表及打印",tableData:[],wmeters:[],billhistory:!1,wfee:0,efee:0,emeters:[],recordcheckout:!1,billhisoptions:[],billhisdata:"",billnum:"",mbill:{house:{},wmeters:[],emeters:[],chargeitems:[]},showbill:!1,houseinfo:{id:"",number:"",address:"",price:0}}},created:function(){var t=this;this.$parent.showbtnback=!0,this.$emit("update:title",this.title),console.log(this.$route.params.hid),this.$parent.$refs.drawer&&this.$parent.$refs.drawer.closeDrawer(),m.a.post("/billpage/getbillneeded",{id:this.$route.params.hid},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(e){console.log(e.data),t.houseinfo=e.data.house,t.mbill.house=e.data.house,t.mbill.chargeitems=e.data.chargeitems.map(function(t){return t.uprice=Number(t.uprice).toFixed(2),t}),t.wmeters=e.data.wmeters.map(function(t){return t.current="",t.total=0,t}),t.emeters=e.data.emeters.map(function(t){return t.current="",t.total=0,t}),t.tableData=e.data.chargeitems.map(function(t){return t.uprice=Number(t.uprice).toFixed(2),t}),t.tableData.push({name:"租金",uprice:Number(t.houseinfo.price).toFixed(2)}),console.log(e.data)}).catch(function(t){console.log(t)})},methods:{inputrecordinit:function(){this.billhistory=!1,this.showbill=!1},handlehisbillgenerate:function(){console.log(this.billnum);var t=this;this.mbill.wmeters=this.billhisdata.wmeters.map(function(e){return e.current=t.billhisdata.records[e.id][t.billnum].data,e.total=0,e.data=t.billhisdata.records[e.id][t.billnum+1].data,e}),this.mbill.emeters=this.billhisdata.emeters.map(function(e){return e.current=t.billhisdata.records[e.id][t.billnum].data,e.total=0,e.data=t.billhisdata.records[e.id][t.billnum+1].data,e}),console.log(this.mbill),this.showbill=!0},billhistoryinit:function(){this.showbill=!1;var t=this;m.a.post("/billpage/getbillhistory",{id:this.$route.params.hid},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(e){console.log(e.data),t.billhistory=!0,t.billhisdata=e.data;var a=e.data.wmeters[0].id;t.billhisoptions=e.data.records[a].map(function(t){return t}),t.billhisoptions.pop()}).catch(function(t){console.log(t)})},handlegeneratebill:function(){this.mbill.wmeters=this.wmeters,this.mbill.emeters=this.emeters,this.showbill=!0,console.log(this.recordcheckout),m.a.post("/billpage/inputmeterrecord",{meters:this.wmeters.concat(this.emeters),checkout:this.recordcheckout,hid:this.$route.params.hid},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(t){console.log(t.data)}).catch(function(t){console.log(t)})}},destroyed:function(){this.$parent.showbtnback=!1}},nt=(a(286),Object(c.a)(it,Z,[],!1,null,"2f583c52",null));nt.options.__file="src/Inputandprint.vue";var rt=nt.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-list-wrap"},[a("Filterbar",{attrs:{handler:t.filterdata}}),t._v(" "),a("div",{staticClass:"m-customer-tab",on:{click:t.handleAddrenter}},[t._m(0)]),t._v(" "),t._l(t.renters,function(e,s){return a("div",{staticClass:"m-customer-card",class:{"is-leave":"0000-00-00"!=e.checkout}},[a("div",{staticClass:"m-customer-card-name"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"m-customer-card-address"},[t._v(t._s(e.number+"-"+e.address))]),t._v(" "),a("div",[a("div",{staticClass:"m-customer-card-checkin m-customer-date"},[t._v(t._s("登记日期:"+e.checkin))]),"0000-00-00"!=e.checkout?a("div",{staticClass:"m-customer-card-leave m-customer-date"},[t._v(t._s("离开日期:"+e.checkout))]):t._e()]),t._v(" "),a("div",{staticClass:"m-customer-card-action"},[a("span",{on:{click:function(a){return t.handlereview(e)}}},[t._v("查看")]),a("span",{on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑")]),a("span",{on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除")])])])}),t._v(" "),a("el-dialog",{staticClass:"m-dialog-override",attrs:{width:"95%","show-close":!1,visible:t.AddVisible},on:{"update:visible":function(e){t.AddVisible=e}}},[a("el-form",{attrs:{model:t.renterform,"label-position":"top"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:t.renterform.name,callback:function(e){t.$set(t.renterform,"name",e)},expression:"renterform.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"身份证号码"}},[a("el-input",{model:{value:t.renterform.idnum,callback:function(e){t.$set(t.renterform,"idnum",e)},expression:"renterform.idnum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{model:{value:t.renterform.callnum,callback:function(e){t.$set(t.renterform,"callnum",e)},expression:"renterform.callnum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"身份证照片"}},[a("el-upload",{ref:"up",attrs:{"file-list":t.idjpglist,"on-remove":t.handleremovejpg,"before-upload":t.changeidjpgdata,limit:2,"on-exceed":t.handlefileexceed,action:"https://easyhome.applinzi.com/public/index.php/ciwirent/fileupload","list-type":"picture-card","auto-upload":!0,"on-success":t.handleupsuccess}},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"客户类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.renterform.roomate,callback:function(e){t.$set(t.renterform,"roomate",e)},expression:"renterform.roomate"}},t._l(t.roomateops,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"入住地址"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.renterform.address,callback:function(e){t.$set(t.renterform,"address",e)},expression:"renterform.address"}},t._l(t.addressops,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"入住房号"}},[a("el-input",{attrs:{placeholder:"请输入房号"},model:{value:t.renterform.hnum,callback:function(e){t.$set(t.renterform,"hnum",e)},expression:"renterform.hnum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"登记日期"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.renterform.checkin,callback:function(e){t.$set(t.renterform,"checkin",e)},expression:"renterform.checkin"}})],1),t._v(" "),this.edit&&"0000-00-00"!=t.renterform.checkout?a("el-form-item",{attrs:{label:"离开日期"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.renterform.checkout,callback:function(e){t.$set(t.renterform,"checkout",e)},expression:"renterform.checkout"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"m-dialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handlesubmit}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:t.requestdeletejpgs}},[t._v("取消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.showdetail,width:"90%"},on:{"update:visible":function(e){t.showdetail=e}}},[a("div",{staticClass:"m-customer-title"},[t._v(t._s(t.customerdata.number+"   "+t.customerdata.address))]),t._v(" "),a("div",{staticClass:"m-customer-row"},[t._v("姓名 "),a("br"),a("span",[t._v(t._s(t.customerdata.name))])]),t._v(" "),a("div",{staticClass:"m-customer-row"},[t._v("身份证号码 "),a("br"),a("span",[t._v(t._s(t.customerdata.idnum))])]),t._v(" "),a("div",{staticClass:"m-customer-row"},[t._v("联系电话 "),a("br"),a("span",[t._v(t._s(t.customerdata.callnum))])]),t._v(" "),a("div",{staticClass:"m-customer-row"},[t._v("登记日期 "),a("br"),a("span",[t._v(t._s(t.customerdata.checkin))])]),t._v(" "),"0000-00-00"!=t.customerdata.checkout?a("div",{staticClass:"m-customer-row"},[t._v("离开日期 "),a("br"),t._v(" "),a("span",[t._v(t._s(t.customerdata.checkout))])]):t._e(),t._v(" "),a("div",{staticClass:"m-customer-row"},t._l(t.customerdata.idjpg,function(t){return a("el-image",{staticClass:"m-idjpg",attrs:{src:t.filename,"preview-src-list":t.previewlist}})}),1)])],2)};ot._withStripped=!0,m.a.defaults.baseURL="https://easyhome.applinzi.com/public/index.php/ciwirent";var lt="http://easyhome-rentadmin.stor.sinaapp.com/idcard/",ct={components:{Filterbar:O},created:function(){this.$emit("update:title",this.title),this.$parent.$refs.drawer&&this.$parent.$refs.drawer.closeDrawer(),this.getrenters()},methods:{filterdata:function(t){this.renters=this.Allrenters.filter(function(e){return e.number==t.number&&e.address==t.address})},handlereview:function(t){console.log(t),this.customerdata=_(t),this.customerdata.idjpg=JSON.parse(this.customerdata.idjpg),this.customerdata.idjpg=this.customerdata.idjpg.map(function(t){return t.filename=lt+t.filename,t.previewlist=[t.filename],t}),this.showdetail=!0},getrenters:function(){var t=this;m.a.get("/customerpage/getallrenters").then(function(e){t.renters=e.data,t.Allrenters=e.data}).catch(function(t){console.log(t)})},deljpgs:function(t){m.a.post("/fileupload/deletejpgs",{jpgs:t},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},handleAddrenter:function(){this.renterform=_(this.baseform),this.deletejpgs=[],this.idjpglist=[],this.edit=!1,this.AddVisible=!0},requestdeletejpgs:function(){this.AddVisible=!1},changeidjpgdata:function(){},handleDelete:function(t){var e=this;m.a.post("/customerpage/deletebyid",{id:this.renters[t].rid},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(a){e.getrenters(),e.deletejpgs=JSON.parse(e.renters[t].idjpg).map(function(t){return{filename:t.filename,deletefromidcard:!0}}),e.renterform.idjpg=[],e.requesthandlejpgs()}).catch(function(t){console.log(t)})},handleEdit:function(t){console.log(this.renters[t]),this.reqhandlejpg=!1,this.edit=!0,this.deletejpgs=[];var e=this;m.a.post("/customerpage/getrenterbyid",{id:this.renters[t].rid},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(t){console.log(t.data);var a=t.data[0];e.renterform.id=a.rid,e.renterform.name=a.name,e.renterform.idnum=a.idnum,e.renterform.callnum=a.callnum,e.renterform.roomate=String(a.roomate),e.renterform.checkin=a.checkin,e.renterform.address=a.address,e.renterform.hnum=a.number,e.renterform.checkout=a.checkout,e.renterform.idjpg=JSON.parse(a.idjpg),e.idjpglist=JSON.parse(a.idjpg).map(function(t){return{name:t.filename,url:lt+t.filename}}),e.AddVisible=!0}).catch(function(t){console.log(t)})},handleupsuccess:function(t,e,a){this.renterform.idjpg=a.map(function(t){return t.response?{filename:t.response,savetoidcard:!0}:{filename:t.name,savetoidcard:!1}}),this.reqhandlejpg=!0,console.log(a)},requesthandlejpgs:function(){m.a.post("/fileupload/handlejpgs",{delete:this.deletejpgs,save:this.renterform.idjpg},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(t){}).catch(function(t){console.log(t)})},handlesubmit:function(){var t=this;this.edit?m.a.post("/customerpage/edit",{data:this.renterform},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(e){e.data.success?(t.AddVisible=!1,t.getrenters(),t.reqhandlejpg&&t.requesthandlejpgs()):t.$confirm("该租盘并不存在","提示",{confirmButtonText:"确定",type:"warning"}).then(function(){}).catch(function(){})}).catch(function(t){console.log(t)}):m.a.post("/customerpage/add",{data:this.renterform},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(e){e.data.success&&(t.AddVisible=!1,t.getrenters(),t.requesthandlejpgs())}).catch(function(t){console.log(t)})},handlefileexceed:function(){this.$confirm("不能上传更多身份证照片了","提示",{confirmButtonText:"确定",type:"warning"}).then(function(){}).catch(function(){})},handleremovejpg:function(t,e){t.response?this.deletejpgs.push({filename:t.response,deletefromidcard:!1}):this.deletejpgs.push({filename:t.name,deletefromidcard:!0}),this.renterform.idjpg=e.map(function(t){return t.response?{filename:t.response,savetoidcard:!0}:{filename:t.name,savetoidcard:!1}}),this.reqhandlejpg=!0,console.log(e)}},data:function(){return{Allrenters:[],idjpglist:[],showdetail:!1,customerdata:{},edit:!1,reqhandlejpg:!1,renters:[],title:"客户管理",AddVisible:!1,deletejpgs:[],addressops:[{value:"横潭大街32-1号",label:"横潭大街32-1号"},{value:"朝阳巷5号",label:"朝阳巷5号"}],roomateops:[{value:"0",label:"承租人"},{value:"1",label:"同居人"}],baseform:{id:"",name:"",idnum:"",callnum:"",idjpg:[],roomate:"",checkin:"",address:"",hnum:"",checkout:""},renterform:{id:"",name:"",idnum:"",callnum:"",idjpg:[],roomate:"",checkin:"",address:"",hnum:"",checkout:""}}}},dt=(a(287),Object(c.a)(ct,ot,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"m-customer-body"},[e("i",{staticClass:"el-icon-edit-outline"}),this._v(" "),e("div",{staticClass:"m-customer-tab-title"},[this._v("客户登记")])])}],!1,null,"28df6dd7",null));dt.options.__file="src/Customer.vue";var pt=dt.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-list-wrap"},[a("div",{staticClass:"m-mode-bar",on:{change:t.handlemodeswitch}},[a("el-radio",{attrs:{label:"recommand"},model:{value:t.displaymode,callback:function(e){t.displaymode=e},expression:"displaymode"}},[t._v("自动推荐")]),t._v(" "),a("el-radio",{attrs:{label:"search"},model:{value:t.displaymode,callback:function(e){t.displaymode=e},expression:"displaymode"}},[t._v("搜索")])],1),t._v(" "),"search"==t.displaymode?a("Filterbar",{attrs:{handler:t.filterdata}}):t._e(),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{size:"medium",data:t.tableData},on:{"row-click":t.handlerowclick}},[a("el-table-column",{staticClass:"m-list-style",attrs:{align:"center",prop:"date",label:"起租日"}}),t._v(" "),a("el-table-column",{staticClass:"m-list-style",attrs:{align:"center",prop:"number",label:"房号"}}),t._v(" "),a("el-table-column",{staticClass:"m-list-style",attrs:{align:"center",prop:"address",label:"地址"}})],1)],1)};ut._withStripped=!0,m.a.defaults.baseURL="https://easyhome.applinzi.com/public/index.php/ciwirent";var ht={components:{Filterbar:O},data:function(){return{title:"结算",tableData:[],displaymode:"recommand",Alldatas:[]}},created:function(){var t=this;this.$emit("update:title",this.title),this.$parent.$refs.drawer&&this.$parent.$refs.drawer.closeDrawer(),m.a.get("/checkoutpage").then(function(e){t.Alldatas=e.data,t.autorecommand()}).catch(function(t){console.log(t)})},methods:{handlerowclick:function(t){this.$router.push({name:"Inputprint",params:{hid:t.id}})},autorecommand:function(){var t=new Date(Date.now()),e=[];e.push(t.getDate());for(var a=1;a<=3;a++){var s=Date.now(),i=new Date(s-864e5*a);e.push(i.getDate()),i=new Date(s+864e5*a),e.push(i.getDate())}this.tableData=this.Alldatas.filter(function(t){return e.includes(new Date(t.date).getDate())})},filterdata:function(t){this.tableData=this.Alldatas.filter(function(e){return e.number==t.number&&e.address==t.address})},handlemodeswitch:function(){"recommand"==this.displaymode?this.autorecommand():this.tableData=[]}}},mt=(a(288),Object(c.a)(ht,ut,[],!1,null,"4a64473f",null));mt.options.__file="src/Checkout.vue";var ft=mt.exports,vt=function(){var t=this.$createElement;this._self._c;return this._m(0)};vt._withStripped=!0;var bt=a(6);m.a.defaults.baseURL="https://easyhome.applinzi.com/public/index.php/ciwirent";var gt={data:function(){return{piedatas:[{label:"已出租",data:8},{label:"未出租",data:3}],drawdata:{}}},created:function(){this.$emit("update:title","首页"),this.$parent.$refs.drawer.closeDrawer();var t=this;m.a.get("/dataspage").then(function(e){console.log(e.data),t.drawdata=e.data}).catch(function(t){console.log(t)})},mounted:function(){var t=this;m.a.get("/dataspage").then(function(e){console.log(e.data),t.drawdata=e.data,t.drawdata.rentrate.forEach(function(e){t.drawpie(e,e.htotal,"".concat(e.name," 租盘数 ").concat(e.htotal))}),t.drawpie(t.drawdata.income,t.drawdata.income.total,"收入统计 总收入 ".concat(t.drawdata.income.total))}).catch(function(t){console.log(t)})},methods:{drawpie:function(t,e,a){var s=window.document.documentElement.clientWidth,i=bt.e("#pie1").append("svg").attr("width","100%").attr("height","400"),n=i.append("g").attr("transform","translate(".concat(s/2,", ").concat(180,")")),r=bt.c().value(function(t){return t.data})(t.datas),o=bt.d(.4,1,.7/t.datas.length/2),l=bt.a().innerRadius(80).outerRadius(140),c=bt.a().innerRadius(80).outerRadius(150),d=i.append("g").attr("transform","translate(".concat(s/2,", ",320,")")),p=i.append("g").attr("transform","translate(".concat(s/2,", ",350,")"));d.selectAll("g").data(r).enter().append("g"),d.selectAll("g").data(r).attr("transform",function(t,e){return"translate(0, 0)"}).append("rect").attr("fill",function(t,e){return bt.b(o[e])}).attr("x",0).attr("y",0).attr("width","15").attr("height","15").attr("rx","2").attr("ry","2"),d.selectAll("g").data(r).append("text").text(function(t){return t.data.label}).attr("transform",function(t,e){return"translate(0, 0)"}).attr("x","18").attr("y","14").attr("fill","rgb(100,100,100)").attr("dominant-baseline","text-after-edge").attr("font-size","12px");var u=0;d.selectAll("g").attr("transform",function(t,e){if(0==e)return u=d.selectAll("g")._groups[0][e].getBBox().width+10,"translate(0, 0)";var a=u;return d.selectAll("g")._groups[0][e],u+=d.selectAll("g")._groups[0][e].getBBox().width+10,"translate(".concat(a,", 0)")});var h=d._groups[0][0].getBBox().width;d.attr("transform","translate(".concat(s/2-h/2,", ",340,")")),p.append("text").text(function(t){return a}).attr("font-size","12px").attr("fill","rgb(100,100,100)");var m=p._groups[0][0].getBBox().width;p.attr("transform","translate(".concat(s/2-m/2,", ",380,")")),n.selectAll("path").data(r).enter().append("path").on("mouseover",function(t,e){bt.e(this).attr("d",c(t))}).on("mouseout",function(t,e){bt.e(this).attr("d",l(t))}).attr("fill",function(t,e){return console.log(e),bt.b(o[e])}).attr("d",function(t){return l(t)}),i.append("g").attr("transform","translate(".concat(s/2,", ").concat(180,")")).selectAll("text").data(r).enter().append("text").attr("transform",function(t){return"translate("+l.centroid(t)+")"}).attr("text-anchor","middle").attr("font-size","0.13rem").attr("fill","rgb(250,250,250)").text(function(t){return(t.data.data/e*100).toFixed(2)+"%("+t.data.data+")"})}}},_t=Object(c.a)(gt,vt,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{attrs:{id:"pie1"}})])}],!1,null,"30bfe48f",null);_t.options.__file="src/dataspage.vue";var wt=_t.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-login-wrap"},[a("div",{ref:"background",staticClass:"m-login-bg"}),t._v(" "),a("div",{staticClass:"m-login-body"},[a("div",{staticClass:"m-login-body-wrap"},[a("h1",[t._v("RENT ADMIN")]),t._v(" "),a("h2",[t._v("欢迎使用Rent Admin管理系统")]),t._v(" "),a("el-form",{staticClass:"m-form-wrap",attrs:{"label-position":"top","label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{"show-password":""},model:{value:t.pw,callback:function(e){t.pw=e},expression:"pw"}})],1),t._v(" "),a("el-button",{staticClass:"m-login-btn",attrs:{type:"primary"},on:{click:t.handlelogin}},[t._v("登录")])],1)],1)])])};function xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ct(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function kt(t,e,a){return e&&Ct(t.prototype,e),a&&Ct(t,a),t}yt._withStripped=!0;var $t=function(){function t(e){var a,s,i,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(xt(this,t),i=function(){if(n.props.canvasSupport){n.props.winW=window.innerWidth,n.props.winH=window.innerHeight,n.props.ctx.clearRect(0,0,n.props.canvas.width,n.props.canvas.height);for(var t=0;t<n.props.particles.length;t++)n.props.particles[t].updatePosition();for(var e=0;e<n.props.particles.length;e++)n.props.particles[e].draw();n.props.paused||(n.props.raf=requestAnimationFrame(n.draw))}},(s="draw")in(a=this)?Object.defineProperty(a,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[s]=i,this.props={canvasSupport:!!document.createElement("canvas").getContext,particles:[],mouseX:0,mouseY:0,desktop:!navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|mobi|tablet|opera mini|nexus 7)/i),orientationSupport:!!window.DeviceOrientationEvent,tiltX:0,tiltY:0,pixelRatio:window.devicePixelRatio||1,paused:!1,element:e},this.options={minSpeedX:r.minSpeedX||.1,maxSpeedX:r.maxSpeedX||.7,minSpeedY:r.minSpeedY||.1,maxSpeedY:r.maxSpeedY||.7,directionX:r.directionX||"center",directionY:r.directionY||"center",density:r.density||1e4,dotColor:r.dotColor||"#666666",lineColor:r.lineColor||"#666666",particleRadius:r.particleRadius||7,lineWidth:r.lineWidth||1,curvedLines:r.curvedLines||!1,proximity:r.proximity||100,parallax:void 0===r.parallax||r.parallax,parallaxMultiplier:r.parallaxMultiplier||5,onInit:r.onInit||void 0,onDestroy:r.onDestroy||void 0},this.props.canvasSupport){this.props.canvas=document.createElement("canvas"),this.props.canvas.className="pg-canvas",this.props.canvas.style.width="100%",this.props.canvas.style.height="100%",this.props.canvas.style.top=0,this.props.canvas.style.left=0,this.props.canvas.style.display="block",this.props.element.style.position="relative",this.props.element.insertBefore(this.props.canvas,this.props.element.firstChild),this.props.ctx=this.props.canvas.getContext("2d"),this.styleCanvas();for(var o=Math.round(this.props.canvas.width*this.props.canvas.height/this.options.density/Math.pow(this.props.pixelRatio,2)),l=0;l<o;l++){var c=new St(this.props,this.options);c.setStackPos(l),this.props.particles.push(c)}window.addEventListener("resize",function(){n.resizeHandler()},!1),document.addEventListener("mousemove",function(t){n.props.mouseX=t.pageX,n.props.mouseY=t.pageY},!1),this.props.orientationSupport&&!this.props.desktop&&window.addEventListener("deviceorientation",function(){n.props.tiltY=Math.min(Math.max(-event.beta,-30),30),n.props.tiltX=Math.min(Math.max(-event.gamma,-30),30)},!0),this.draw(),this.hook("onInit")}}return kt(t,[{key:"styleCanvas",value:function(){this.props.canvas.width=this.props.element.offsetWidth*this.props.pixelRatio,this.props.canvas.height=this.props.element.offsetHeight*this.props.pixelRatio,this.props.ctx.fillStyle=this.options.dotColor,this.props.ctx.strokeStyle=this.options.lineColor,this.props.ctx.lineWidth=this.options.lineWidth*this.props.pixelRatio}},{key:"resizeHandler",value:function(){this.styleCanvas();for(var t=this.props.element.offsetWidth*this.props.pixelRatio,e=this.props.element.offsetHeight*this.props.pixelRatio,a=this.props.particles.length-1;a>=0;a--)(this.props.particles[a].position.x>t||this.props.particles[a].position.y>e)&&this.props.particles.splice(a,1);var s=Math.round(this.props.canvas.width*this.props.canvas.height/this.options.density/Math.pow(this.props.pixelRatio,2));if(s>this.props.particles.length)for(;s>this.props.particles.length;){var i=new St(this.props,this.options);this.props.particles.push(i)}else s<this.props.particles.length&&this.props.particles.splice(s);for(var n=this.props.particles.length-1;n>=0;n--)this.props.particles[n].setStackPos(n)}},{key:"pause",value:function(){this.props.paused=!0}},{key:"start",value:function(){this.props.paused=!1,this.draw()}},{key:"option",value:function(t,e){if(!e)return this.options[t];this.options[t]=e}},{key:"destroy",value:function(){this.props.canvas.parentNode.removeChild(this.props.canvas),this.hook("onDestroy")}},{key:"hook",value:function(t){void 0!==this.options[t]&&this.options[t].call(this.props.element)}}]),t}(),St=function(){function t(e,a){switch(xt(this,t),this.props=e,this.options=a,this.stackPos,this.active=!0,this.layer=Math.ceil(3*Math.random()),this.parallaxOffsetX=0,this.parallaxOffsetY=0,this.position={x:Math.ceil(Math.random()*this.props.canvas.width),y:Math.ceil(Math.random()*this.props.canvas.height)},this.speed={},this.options.directionX){case"left":this.speed.x=+(-this.options.maxSpeedX+Math.random()*this.options.maxSpeedX-this.options.minSpeedX).toFixed(2);break;case"right":this.speed.x=+(Math.random()*this.options.maxSpeedX+this.options.minSpeedX).toFixed(2);break;default:this.speed.x=+(-this.options.maxSpeedX/2+Math.random()*this.options.maxSpeedX).toFixed(2),this.speed.x+=this.speed.x>0?this.options.minSpeedX:-this.options.minSpeedX}switch(this.options.directionY){case"up":this.speed.y=+(-this.options.maxSpeedY+Math.random()*this.options.maxSpeedY-this.options.minSpeedY).toFixed(2);break;case"down":this.speed.y=+(Math.random()*this.options.maxSpeedY+this.options.minSpeedY).toFixed(2);break;default:this.speed.y=+(-this.options.maxSpeedY/2+Math.random()*this.options.maxSpeedY).toFixed(2),this.speed.x+=this.speed.y>0?this.options.minSpeedY:-this.options.minSpeedY}}return kt(t,[{key:"draw",value:function(){this.props.ctx.beginPath(),this.props.ctx.arc(this.position.x+this.parallaxOffsetX,this.position.y+this.parallaxOffsetY,this.options.particleRadius*this.props.pixelRatio/2,0,2*Math.PI,!0),this.props.ctx.closePath(),this.props.ctx.fill(),this.props.ctx.beginPath();for(var t=this.props.particles.length-1;t>this.stackPos;t--){var e=this.props.particles[t],a=this.position.x-e.position.x,s=this.position.y-e.position.y;Math.sqrt(a*a+s*s).toFixed(2)<this.options.proximity*this.props.pixelRatio&&(this.props.ctx.moveTo(this.position.x+this.parallaxOffsetX,this.position.y+this.parallaxOffsetY),this.options.curvedLines?this.props.ctx.quadraticCurveTo(Math.max(e.position.x,e.position.x),Math.min(e.position.y,e.position.y),e.position.x+e.parallaxOffsetX,e.position.y+e.parallaxOffsetY):this.props.ctx.lineTo(e.position.x+e.parallaxOffsetX,e.position.y+e.parallaxOffsetY))}this.props.ctx.stroke(),this.props.ctx.closePath()}},{key:"updatePosition",value:function(){if(this.options.parallax){if(this.props.orientationSupport&&!this.props.desktop){var t=(this.props.winW-0)/60;this.props.pointerX=(this.props.tiltX- -30)*t+0;var e=(this.props.winH-0)/60;this.props.pointerY=(this.props.tiltY- -30)*e+0}else this.props.pointerX=this.props.mouseX,this.props.pointerY=this.props.mouseY;this.parallaxTargX=(this.props.pointerX-this.props.winW/2)/(this.options.parallaxMultiplier*this.layer),this.parallaxOffsetX+=(this.parallaxTargX-this.parallaxOffsetX)/10,this.parallaxTargY=(this.props.pointerY-this.props.winH/2)/(this.options.parallaxMultiplier*this.layer),this.parallaxOffsetY+=(this.parallaxTargY-this.parallaxOffsetY)/10}var a=this.props.element.offsetWidth*this.props.pixelRatio,s=this.props.element.offsetHeight*this.props.pixelRatio;switch(this.options.directionX){case"left":this.position.x+this.speed.x+this.parallaxOffsetX<0&&(this.position.x=a-this.parallaxOffsetX);break;case"right":this.position.x+this.speed.x+this.parallaxOffsetX>a&&(this.position.x=0-this.parallaxOffsetX);break;default:(this.position.x+this.speed.x+this.parallaxOffsetX>a||this.position.x+this.speed.x+this.parallaxOffsetX<0)&&(this.speed.x=-this.speed.x)}switch(this.options.directionY){case"up":this.position.y+this.speed.y+this.parallaxOffsetY<0&&(this.position.y=s-this.parallaxOffsetY);break;case"down":this.position.y+this.speed.y+this.parallaxOffsetY>s&&(this.position.y=0-this.parallaxOffsetY);break;default:(this.position.y+this.speed.y+this.parallaxOffsetY>s||this.position.y+this.speed.y+this.parallaxOffsetY<0)&&(this.speed.y=-this.speed.y)}this.position.x+=this.speed.x,this.position.y+=this.speed.y}},{key:"setStackPos",value:function(t){this.stackPos=t}}]),t}(),Ot=$t;m.a.defaults.baseURL="https://easyhome.applinzi.com/public/index.php/ciwirent",m.a.defaults.withCredentials=!0;var jt={name:"login",data:function(){return{username:"",pw:""}},mounted:function(){console.log(this.$refs.background),new Ot(this.$refs.background,{dotColor:"rgb(140, 197, 255)",lineColor:"rgb(198, 226, 255)"})},methods:{handlelogin:function(){var t=this;m.a.post("/loginauth/login",{name:this.username,password:this.pw},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return"data="+JSON.stringify(t)}]}).then(function(e){"AUTHED"==e.data.msg&&t.$router.push({path:"/"})}).catch(function(t){console.log(t)})}}},At=(a(289),Object(c.a)(jt,yt,[],!1,null,"6a7e6ec0",null));At.options.__file="src/Login.vue";var Rt=At.exports,Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{click:function(e){t.showdropdown=!1}}},[a("div",{staticClass:"header"},[a("div",{staticClass:"m-header-nav"},[a("div",{staticClass:"menu-btn",on:{click:t.handleOpendrawer}},[a("i",{staticClass:"el-icon-minus menu-btn-el"}),t._v(" "),a("i",{staticClass:"el-icon-minus menu-btn-el"}),t._v(" "),a("i",{staticClass:"el-icon-minus menu-btn-el"})]),t._v(" "),a("div",{staticClass:"m-usr-wrap",on:{click:function(e){e.stopPropagation(),t.showdropdown=!t.showdropdown}}},[a("div",{staticClass:"m-usr-img"},[a("img",{attrs:{src:t.usrimg}})]),t._v(" "),a("i",{staticClass:"el-icon-caret-bottom m-usr-icon"}),t._v(" "),t.showdropdown?a("div",{staticClass:"m-usr-dropdown"},[a("div",{staticClass:"m-usr-dropdown-itm",on:{click:function(e){return e.stopPropagation(),t.handlelogout(e)}}},[t._v("退出登录")])]):t._e()])])]),t._v(" "),a("div",{staticClass:"m-title-bar"},[t.showbtnback?a("span",{staticClass:"m-navbtn-back",on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"el-icon-back"})]):t._e(),a("span",[t._v(t._s(t.title))])]),t._v(" "),a("router-view",{attrs:{title:t.title},on:{"update:title":function(e){t.title=e}}}),t._v(" "),a("el-drawer",{ref:"drawer",attrs:{visible:t.opendraw,direction:"ltr","with-header":!1,size:"60.83%"},on:{"update:visible":function(e){t.opendraw=e}}},[a("div",{staticClass:"brand-name"},[a("span",[t._v("RentAdmin")])]),t._v(" "),a("el-menu",{attrs:{"default-active":"/",router:!0}},[a("el-menu-item",{attrs:{index:"/"}},[a("i",{staticClass:"el-icon-s-home"}),t._v(" "),a("span",[t._v("首页")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/house"}},[a("i",{staticClass:"el-icon-location"}),t._v(" "),a("span",[t._v("我的租盘")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/chargeitems"}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("收费项目")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/records"}},[a("i",{staticClass:"el-icon-document"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("水电表记录")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/customer"}},[a("i",{staticClass:"el-icon-setting"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("客户管理")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/checkout"}},[a("i",{staticClass:"el-icon-setting"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("结算")])])],1)],1)],1)};Dt._withStripped=!0;var Yt=a.p+"b478c99b5eeb8f2c7068b00df8cfbf48.png";m.a.defaults.baseURL="https://easyhome.applinzi.com/public/index.php/ciwirent",m.a.defaults.withCredentials=!0;var Et={mounted:function(){console.log(this.$refs.drawer)},data:function(){return{msg:"Hello world!",opendraw:!1,usrimg:Yt,title:"首页",showbtnback:!1,showdropdown:!1}},methods:{drawpie:function(){},handleOpendrawer:function(){this.opendraw=!0},handlelogout:function(){var t=this;m.a.get("/loginauth/logout").then(function(e){console.log(e),t.$router.push({path:"/login"})}).catch(function(t){console.log(t)})}}},Nt=(a(290),Object(c.a)(Et,Dt,[],!1,null,"2964abc9",null));Nt.options.__file="src/index.vue";var Tt=Nt.exports;m.a.defaults.baseURL="https://easyhome.applinzi.com/public/index.php/ciwirent",m.a.defaults.withCredentials=!0;var Mt=[{path:"/",component:Tt,children:[{path:"/",component:wt},{path:"house",component:R},{path:"chargeitems",component:N},{path:"records",component:F},{path:"customer",component:pt},{path:"checkout",component:ft},{path:"records/meter/:hid",name:"Meterrecords",component:Q},{path:"checkout/inputandprint/:hid",name:"Inputprint",component:rt}]},{path:"/login",component:Rt}],Xt=new r.a({routes:Mt});Xt.beforeEach(function(t,e,a){console.log(e),console.log(t),"/login"==t.path?a():m.a.get("/Loginauth/auth").then(function(t){t.data.status?a():a("/login")}).catch(function(t){console.log(t)})});var Ft=Xt;!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;window.document.documentElement.style.fontSize=window.document.documentElement.clientWidth/411*t+"px"}(),s.default.use(r.a),s.default.use(n.a,{size:"medium",zIndex:3e3}),window.app=new s.default({el:"#app",router:Ft,render:function(t){return t(p)}})},38:function(t,e,a){},39:function(t,e,a){},40:function(t,e,a){},41:function(t,e,a){},42:function(t,e,a){},43:function(t,e,a){},44:function(t,e,a){},45:function(t,e,a){},46:function(t,e,a){},47:function(t,e,a){},48:function(t,e,a){},49:function(t,e,a){},50:function(t,e,a){},51:function(t,e,a){}});